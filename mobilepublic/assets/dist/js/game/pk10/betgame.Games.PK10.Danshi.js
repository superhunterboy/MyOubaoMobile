/*‮*/!function(t,e,a,i){var n={name:"wuxing.zhixuan.danshi",editorobj:".content-text-balls",uploadButton:"#file",exampleText:"12345 33456 87898 <br />12345 33456 87898 <br />12345 33456 87898 ",tips:"五星直选单式玩法提示",exampleTip:"这是单式弹出层提示",checkFont:/[\u4E00-\u9FA5]|[\/\n]|[\/W]/g,filtration:/[\s]|[,]|[;]|[<br>]|[，]|[；]/g,checkNum:/^[0-9]*$/,normalTips:["说明：","1、每一注号码之间的间隔符支持 回车  空格[ ]    逗号[,]   分号[;]","2、文件格式必须是.txt格式,大小不超过200KB。","3、将文件拖入文本框即可快速实现文件上传,大文件拖拽上传效果更佳。","4、导入文本内容后将覆盖文本框中现有的内容。","5、一次投注支持100,000注！"].join("\n")},r="PK10",o=t.Games,s=t.Games[r],l={init:function(t){var e=this;e.ieRange="",e.vData=[],e.aData=[],e.tData=[],e.errorData=[],e.sameData=[],e.firstfocus=!0,e.ranNumTag=!1,e.isFirstAdd=!0,o.getCurrentGameOrder().addEvent("beforeAdd",function(t,a){e.tData;a.type==e.defConfig.name&&(e.isFirstAdd?e.ranNumTag||(a.lotterys=[],e.isFirstAdd=null,e.updateData(),o.getCurrentGameOrder().add(o.getCurrentGameStatistics().getResultData())):(""==e.errorData.join("")&&""==e.sameData.join("")||e.ballsErrorTip(),e.isFirstAdd=!0))})},initTextarea:function(){var t=this,e="content-textarea-balls-def",a=t.defConfig,i=$.trim(a.normalTips);t.importTextarea=$('<textarea class="content-textarea-balls '+e+'">'+i+"</textarea>"),t.container.find(".panel-select").html("").append(t.importTextarea),t.importTextarea.focus(function(){var a=$.trim(this.value);a==i&&(this.value="",t.importTextarea.removeClass(e))}).blur(function(){var e=$.trim(this.value);""==e&&(t.removeOrderAll(),t.showNormalTips())}).keyup(function(){t.updateData()})},initFrame:function(){var t=this;t.initTextarea(),t.bindPressTextarea(),t.dragUpload()},getExampleText:function(){return this.defConfig.exampleText},rebuildData:function(){var t=this;t.balls=[[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]]},buildUI:function(){var t=this;t.container.html(t.getHTML())},reSelect:function(){},batchSetBallDom:function(){},getNormalTips:function(){return this.defConfig.normalTips},showNormalTips:function(){var t=this,e="content-textarea-balls-def";t.importTextarea&&t.importTextarea.addClass(e),t.replaceText(t.getNormalTips.call(t))},_bulidEditDom:function(){var t=this,e="";t.doc.designMode="On",t.doc.contentEditable=!0,t.doc.open(),e='<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',e+="<style>*{margin:0;padding:0;font-size:14px;}</style>",e+="</head>",t.doc.writeln("<html>"+e+'<body style="word-break: break-all">'+t.getNormalTips()+"</body></html>"),t.doc.close(),t.bindPress(),document.all&&(t.doc.onkeypress=function(){return t._ieEnter()}),t.dragUpload()},dragUpload:function(){var t=this,e=t.importTextarea;window.FileReader&&(e.bind("dragover",function(t){t.preventDefault(),t.stopPropagation()}),e.get(0).addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation();var a=e.dataTransfer.files,i=a[0],n=new FileReader,r=i.type?i.type:"n/a";"text/plain"==r&&(n.onload=function(e){var a=e.target.result;""!=$.trim(a)&&(t.replaceText(a),t.updateData())},n.readAsText(i))},!1))},_ieEnter:function(){var t=this,e=t.win.event;if(13==e.keyCode)return this._saveRange(),this._insert("<br/>"),!1},_insert:function(t){var e=this;if(e.ieRange)e.ieRange.pasteHTML(t),e.ieRange.select(),e.ieRange=!1;else if(e.win.focus(),document.all)e.doc.body.innerHTML+=t;else{var a=win.getSelection(),i=a.getRangeAt(0),n=i.createContextualFragment(t);i.insertNode(n)}},_saveRange:function(){if(document.all&&!me.ieRange){var t=me.doc.selection;if(me.ieRange=t.createRange(),"Control"!=t.type){var e=me.ieRange.parentElement();"INPUT"!=e.tagName&&e!=document.body||(me.ieRange=!1)}}},getHtml:function(){var t=this,e=t.importTextarea?t.importTextarea.val():"";return e},replaceText:function(t){var e=this;e.importTextarea&&e.importTextarea.val(t)},bindPressTextarea:function(){var t=this,e=t.container.find(t.defConfig.uploadButton);window.navigator.userAgent.toLowerCase();e.bind("change",function(){var e=$(this).parent();t.checkFile(this,e)})},bindPress:function(){var t=this,e=t.container.find(t.defConfig.uploadButton),a=window.navigator.userAgent.toLowerCase();$(t.doc).bind("input",function(){t.updateData()}),a.indexOf("msie")>0&&($(t.doc.body).bind("keyup",function(){t.updateData()}),$(t.doc.body).bind("blur",function(){t.updateData()})),$(t.doc).bind("focus",function(){t.firstfocus&&(t.replaceText(" "),t.firstfocus=!1)}),$(t.doc).bind("blur",function(){var e=t.getText();""==$.trim(e)?t.showNormalTips():t.updateData()}),$(t.doc.body).bind("focus",function(){t.firstfocus&&(t.replaceText(" "),t.firstfocus=!1)}),$(t.doc.body).bind("blur",function(){var e=t.getText();""==$.trim(e)?t.showNormalTips():t.updateData()}),e.bind("change",function(){var e=$(this).parent();t.checkFile(this,e)})},iterator:function(t){var e,a=this,i=a.defConfig,n=[],r=[];return t=$.trim(t),t=t.replace(i.filtration,"|"),t=t.replace(/\s+/g," "),t=$.trim(t),r=t.split("|"),$.each(r,function(t){e=$.trim(this),""!=e&&n.push(e)}),n},checkResult:function(t,e){for(var a=e.length-1;a>=0;a--)if(e[a].join("")==t)return!1;return!0},filterLotters:function(t){var e=this,a="";return a=t.replace(/<br>+|&nbsp;+/gi," "),a=a.replace(/\s\s|[\s]|[,]+|[;]+|[，]+|[；]+/gi," "),a=a.replace(/<(?:"[^"]*"|'[^']*'|[^>'"]*)+>/g," "),a=a.replace(e.defConfig.checkFont,"")+" "},checkSingleNum:function(t){var e=this;return e.defConfig.checkNum.test(t)&&t.length==e.balls.length},checkBallIsComplete:function(t){var e=this;e.aData=[],e.vData=[],e.sameData=[],e.errorData=[],e.tData=[],result=[],result=e.iterator(e.filterLotters(t)).sort()||[];for(var a=result.length;a--;){if(e.checkSingleNum(result[a])){var i=result[a];i==result[a+1]?e.sameData.push(result[a].split("")):e.tData.push(result[a].split("")),e.vData.push(result[a].split(""))}else e.errorData.push(result[a].split(""));e.aData.push(result[a].split(""))}return e.tData.length>0?(e.isBallsComplete=!0,e.isFirstAdd?e.vData:e.tData):(e.isBallsComplete=!1,[])},countInstances:function(t,e){var a=[],i=0;do i=t.indexOf(e,i),i!=-1&&(a.push(i),i+=e.length);while(i!=-1);return a},removeOrderError:function(){var t=this,e=[],a=0,i=t.tData.length;for(a=0;a<i;a++)e[a]=t.tData[a].join("");e=$.trim(e.join(" ")),t.errorDataTips(),t.replaceText(e),t.errorData=[],t.sameData=[],""==e&&t.showNormalTips()},removeOrderSame:function(){var t=this,e=[],a=0,i=t.tData.length;for(a=0;a<i;a++)e[a]=t.tData[a].join("");e=$.trim(e.join(" ")),t.sameDataTips(),t.replaceText(e),t.errorData=[],t.sameData=[],""==e&&t.showNormalTips()},filterOrder:function(t){var e=this,a=[],i=0,n=e.tData.length;for(i=0;i<n;i++)a[i]=e.tData[i].join("");a=$.trim(a.join(" ")),"hide"!=t&&(e.errorData.length||e.sameData.length)&&e.ballsErrorTip(),e.replaceText(a),e.errorData=[],e.sameData=[],""==a&&e.showNormalTips()},removeOrderAll:function(){var t=this;t.replaceText(" "),t.sameData=[],t.aData=[],t.tData=[],t.vData=[],o.getCurrentGameStatistics().reSet(),t.showNormalTips()},checkFile:function(t,e){var a=t.value,i=a.substring(a.lastIndexOf("."),a.length),i=i.toLowerCase();return".txt"!=i?(alert("对不起，导入数据格式必须是.txt格式文件哦，请您调整格式后重新上传，谢谢 ！"),!1):void e[0].submit()},getFile:function(t){var e=this,a=e.container.find(":reset");t&&(e.replaceText(t),e.firstfocus=!1,e.updateData(),a.click())},errorTip:function(t,e){var a=this;alert(a.errorData.join())},sameDataTips:function(){var t=this,e=t.sameData,a="",i=o.getCurrentGameMessage(),n=[];if(""!=e.join("")){for(var r=0;r<e.length;r++)$.trim(e[r].join(""))&&n.push(e[r].join(""));a='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码重复，已进行自动过滤</h4><p class="pop-text" style="display:block">'+n.join(", ")+"</p>",i.show({mask:!0,content:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">'+a+"</div>","</div>","</div>"].join(""),closeIsShow:!0,closeFun:function(){this.hide()}})}},errorDataTips:function(){var t=this,e=t.errorData,a="",i=o.getCurrentGameMessage(),n=[];if(""!=e.join("")){for(var r=0;r<e.length;r++)$.trim(e[r].join(""))&&n.push(e[r].join(""));a='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码错误，已进行自动过滤</h4><p class="pop-text" style="display:block">'+n.join(", ")+"</p>",i.show({mask:!0,content:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">'+a+"</div>","</div>","</div>"].join(""),closeIsShow:!0,closeFun:function(){this.hide()}})}},ballsErrorTip:function(t,e){var a=this,i=a.errorData,n=a.sameData,r="",s="",l=o.getCurrentGameMessage(),c=[],u=[];if(""!=n.join("")){for(var p=0;p<n.length;p++)$.trim(n[p].join(""))&&u.push(n[p].join(""));s='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码重复，已进行自动过滤</h4><p class="pop-text" style="display:block">'+u.join(", ")+"</p>"}if(""!=i.join("")){for(var p=0;p<i.length;p++)$.trim(i[p].join(""))&&c.push(i[p].join(""));r='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码错误，已进行自动过滤</h4><p class="pop-text" style="display:block">'+c.join(", ")+"</p>"}l.show({mask:!0,content:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">'+s+r+"</div>","</div>","</div>"].join(""),closeIsShow:!0,closeFun:function(){this.hide()}})},reSet:function(){var t=this;t.isBallsComplete=!1,t.rebuildData(),t.updateData(),t.ranNumTag||t.showNormalTips(),t.removeRanNumTag()},formatViewBalls:function(t){for(var e=[],a=t.length,i=0;i<a;i++)e[i]=t[i].join("");var n=e.join("|");return n},makePostParameter:function(t,e){for(var a=[],t=e.lotterys,i=t.length,n=0;n<i;n++)a[n]=t[n].join("");return a.join("|")},getLottery:function(){var t=this,e=t.getHtml();if(""!=e)return t.checkBallIsComplete(e)},removeSameNum:function(t){var e,a=0,i=this,n=this.getBallData()[0].length;for(len=t.length,e=Math.floor(Math.random()*n);a<t.length;a++)if(e==t[a])return arguments.callee.call(i,t);return e},emptySameData:function(){this.sameData=[]},emptyErrorData:function(){this.errorData=[]},addRanNumTag:function(){var t=this;t.ranNumTag=!0,t.emptySameData(),t.emptyErrorData()},getTdata:function(){return this.tData},getOriginal:function(){return this.getTdata()},removeRanNumTag:function(){this.ranNumTag=!1},checkRandomBets:function(t,e){var a=this,i="undefined"==typeof t,t=t||{},n=[],e=e||0,r=(a.getBallData().length,a.getBallData()[0].length,o.getCurrentGameOrder().getTotal().orders);if(n=a.createRandomNum(),Number(e)>Number(a.getRandomBetsNum()))return n;if(i)for(var s=0;s<r.length;s++)if(r[s].type==a.defConfig.name){var l=r[s].original.join("").replace(/,/g,"");t[l]=l}return t[n.join("")]?(e++,arguments.callee.call(a,t,e)):n},randomNum:function(){var e=this,a=[],i=null,n=(e.getBallData(),e.defConfig.name,o.getCurrentGame().getCurrentGameMethod().getName()),r=o.getCurrentGame().getCurrentGameMethod().getId(),s=o.getCurrentGameStatistics().getPrizeGroupRate(),l=[],c=[];e.addRanNumTag(),a=e.checkRandomBets(),c=a,l=e.combination(c),i={mid:r,type:n,original:c,lotterys:l,moneyUnit:o.getCurrentGameStatistics().getMoneyUnit(),multiple:o.getCurrentGameStatistics().getMultip(),onePrice:o.getCurrentGame().getGameConfig().getInstance().getOnePriceById(r),num:l.length};var u=i.num*i.moneyUnit*i.multiple*i.onePrice;return i.amountText=t.util.formatMoney(u),i.prizeGroupVal=(u*s).toFixed(4),i},getHTML:function(){var t=o.getCurrentGame().getGameConfig().getInstance().getUploadPath(),e=o.getCurrentGame().getGameConfig().getInstance().getToken(),a=[];return a.push('<div class="number-select-title balls-type-title clearfix"><div class="number-select-link"><a href="#" class="pick-rule">选号规则</a><a href="#" class="win-info">中奖说明</a></div></div>'),a.push('<div class="balls-import clearfix">'),a.push('<form id="form1" name="form1" enctype="multipart/form-data" method="post" action="'+t+'" target="check_file_frame" style="position:relative;padding-bottom:10px;">'),a.push('<input name="betNumber" type="file" id="file" size="40" hidefocus="true" value="导入" style="outline:none;-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);filter:alpha(opacity=0);opacity: 0;position:absolute;top:0px; left:0px; width:115px; height:30px;z-index:1;background:#000;cursor: pointer;" />'),a.push('<input name="_token" type="hidden" value="'+e+'" />'),a.push('<input type="button" class="btn balls-import-input" style="cursor: pointer;" value="导入注单" onclick=document.getElementById("form1").file.click()>&nbsp;&nbsp;&nbsp;&nbsp;<a style="display:none;" class="balls-example-danshi-tip" href="#">查看标准格式样本</a>'),a.push('<input type="reset" style="outline:none;-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);filter:alpha(opacity=0);opacity: 0;width:0px; height:0px;z-index:1;background:#000" />'),a.push('<iframe src="'+t+'" name="check_file_frame" style="display:none;"></iframe>'),a.push("</form>"),a.push('<div class="panel-select"><iframe style="width:100%;height:100%;border:0 none;background-color:#F9F9F9;" class="content-text-balls"></iframe></div>'),a.push('<div class="panel-btn">'),a.push('<a class="btn filter-order" href="javascript:void(0);">清除错误或重复项</a>'),a.push('<a class="btn remove-all" href="javascript:void(0);">清空文本框</a>'),a.push("</div>"),a.push("</div>"),a.join("")}},c=t.Class(l,a);c.defConfig=n,s[e]=c}(betgame,"Danshi",betgame.GameMethod);