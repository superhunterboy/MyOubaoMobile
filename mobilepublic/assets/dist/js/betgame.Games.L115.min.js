/*‮*/!function(e,t,a,n){var r,i={name:t,jsNameSpace:"betgame.Games.L115."},o=e.Games,s={init:function(){var e=this;e.eventProxy()},getGameConfig:function(){return o[t].Config}},u=e.Class(s,a);u.defConfig=i,u.getInstance=function(e){return r||(r=new u(e))},e.Games[t]=u}(betgame,"L115",betgame.Game),function(e,t,a,n){var r,i=gameConfigData,o={},s={},u={};!function(){var e,t,a,n=i.wayGroups;$.each(n,function(){e=this,e.fullname_en=[e.name_en],e.fullname_cn=[e.name_cn],s[""+e.id]=e,e.children&&$.each(e.children,function(){t=this,t.fullname_en=e.fullname_en.concat(t.name_en),t.fullname_cn=e.fullname_cn.concat(t.name_cn),s[""+t.id]=t,t.children&&$.each(t.children,function(){a=this,a.fullname_en=t.fullname_en.concat(a.name_en),a.fullname_cn=t.fullname_cn.concat(a.name_cn),u[""+a.id]=a})})})}();var l={init:function(){},getGameId:function(){return i.gameId},getGameNameEn:function(){return i.gameNameEn},getGameNameCn:function(){return i.gameNameCn},getTraceMaxTimes:function(){return Number(i.traceMaxTimes)},getCurrentLastTime:function(){return i.currentNumberTime},getCurrentTime:function(){return i.currentTime},getCurrentGameNumber:function(){return i.currentNumber},getLastGameNumber:function(){var e=i.issueHistory.last_number.issue,t=i.issueHistory.issues[0].issue;return t>e&&(e=t),e},getLotteryBalls:function(){var e=i.issueHistory.last_number.wn_number,t=i.issueHistory.last_number.issue,a=i.issueHistory.issues[0].issue;return a>t&&(e=i.issueHistory.issues[0].wn_number),e||""},getLotteryNumbers:function(){return i.issueHistory.issues||[]},getFormatLotteryNumbers:function(e,t){var a=this,n={};return t=t||a.getLotteryNumbers(),e=e||"hour",$.each(t,function(t,r){var i=a.getKeyByDateStr(""+r.offical_time,e);i&&(n[i]||(n[i]=[]),n[i].push(r))}),n},getKeyByDateStr:function(e,t){e=e||"0",t=t||"hour";var a=new Date;if(a.setTime(1e3*parseInt(e)),"[object Date]"===Object.prototype.toString.call(a)){if(isNaN(a.getTime()))return"";var n=a.getMonth()+1,r=a.getDate(),i=a.getHours(),o=a.getMinutes();return n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i),o<10&&(o="0"+o),"month"==t?n+"月":"day"==t?n+"月"+r+"日":"minute"==t?i+":"+o:i+":00"}return""},getGameNumbers:function(){return i.gameNumbers},getLimitByMethodId:function(e,t){var t=t||1,a=Number(this.getPrizeById(e).max_multiple);return a/t},getSubmitUrl:function(){return i.submitUrl},getUpdateUrl:function(){return i.loaddataUrl},getUploadPath:function(){return i.uploadPath},getJsPath:function(){return i.jsPath},getDefaultMethodId:function(){return i.defaultMethodId},getUserName:function(){return i.username},getMethods:function(){return i.wayGroups},getMethodById:function(e){return u[""+e]},getPrizeById:function(e){return i.prizeSettings[""+e]},getMethodNodeById:function(e){return s[""+e]},getMethodNameById:function(e){var t=this.getMethodById(e);return t?t.name_en:""},getMethodCnNameById:function(e){var t=this.getMethodById(e);return t?t.name_cn:""},getMethodFullNameById:function(e){var t=this.getMethodById(e);return t?t.fullname_en:""},getMethodCnFullNameById:function(e){var t=this.getMethodById(e);return t?t.fullname_cn:""},getOnePriceById:function(e){return Number(this.getMethodById(e).price)},getToken:function(){return i._token},updateConfig:function(e){$.extend(!0,i,e)},getOptionalPrizes:function(){return i.optionalPrizes},setOptionalPrizes:function(){return $("#J-bonus-select-value").val()},getDefaultCoefficient:function(){return i.defaultCoefficient?"1":i.defaultCoefficient},getDefaultMultiple:function(){return i.defaultMultiple?i.defaultMultiple:"1"},getLoadIssueUrl:function(){return i.loadIssueUrl},getUserPrizeGroup:function(){return i.userPrizeGroup}},c=e.Class(l,a);c.defConfig=o,c.getInstance=function(e){return r||(r=new c(e))},e.Games.L115[t]=c}(betgame,"Config",betgame.Event),function(e,t,a,n){var r,i={},o="L115",s=e.Games,u={init:function(e){var t=this;s.setCurrentGameMessage(t)}},l=e.Class(u,a);l.defConfig=i,l.getInstance=function(e){return r||(r=new l(e))},e.Games[o][t]=l}(betgame,"Message",betgame.GameMessage),function(e,t,a,n){var r={name:"wuxing.zhixuan.danshi",editorobj:".content-text-balls",uploadButton:"#file",exampleText:"12345 33456 87898 <br />12345 33456 87898 <br />12345 33456 87898 ",tips:"五星直选单式玩法提示",exampleTip:"这是单式弹出层提示",checkFont:/[\u4E00-\u9FA5]|[\/\n]|[\/W]/g,filtration:/[\s]|[,]|[;]|[<br>]|[，]|[；]/g,checkNum:/^[0-9]*$/,normalTips:["输入的注单请参照如下规则：","1、单注内各号码保持相连，不同注号码间用分隔符隔开","2、每一注号码之间的间隔符支持 回车  空格[ ]   逗号[,]   分号[;]","3、导入文本内容后将覆盖文本框中现有的内容。","4、一次投注支持100,000注！"].join("\n")},i="L115",o=e.Games,s=e.Games[i],u={init:function(e){var t=this;t.ieRange="",t.vData=[],t.aData=[],t.tData=[],t.errorData=[],t.sameData=[],t.firstfocus=!0,t.ranNumTag=!1,t.isFirstAdd=!0,o.getCurrentGameOrder().addEvent("beforeAdd",function(e,a){t.tData;a.type==t.defConfig.name&&(t.isFirstAdd?t.ranNumTag||(a.lotterys=[],t.isFirstAdd=null,t.updateData(),o.getCurrentGameOrder().add(o.getCurrentGameStatistics().getResultData())):(""==t.errorData.join("")&&""==t.sameData.join("")||t.ballsErrorTip(),t.isFirstAdd=!0))})},initTextarea:function(){var e=this,t="content-textarea-balls-def",a=e.defConfig,n=$.trim(a.normalTips);e.importTextarea=$('<textarea class="content-textarea-balls '+t+'">'+n+"</textarea>"),e.container.find(".panel-select").html("").append(e.importTextarea),e.importTextarea.focus(function(){var a=$.trim(this.value);a==n&&(this.value="",e.importTextarea.removeClass(t))}).blur(function(){var t=$.trim(this.value);""==t&&(e.removeOrderAll(),e.showNormalTips())}).keyup(function(){e.updateData()})},initFrame:function(){var e=this;e.initTextarea(),e.bindPressTextarea()},getExampleText:function(){return this.defConfig.exampleText},rebuildData:function(){var e=this;e.balls=[[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]]},buildUI:function(){var e=this;e.container.html(e.getHTML())},reSelect:function(){},batchSetBallDom:function(){},getNormalTips:function(){return this.defConfig.normalTips},showNormalTips:function(){var e=this,t="content-textarea-balls-def";e.importTextarea&&e.importTextarea.addClass(t),e.replaceText(e.getNormalTips.call(e))},_bulidEditDom:function(){var e=this,t="";e.doc.designMode="On",e.doc.contentEditable=!0,e.doc.open(),t='<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',t+="<style>*{margin:0;padding:0;font-size:14px;}</style>",t+="</head>",e.doc.writeln("<html>"+t+'<body style="word-break: break-all">'+e.getNormalTips()+"</body></html>"),e.doc.close(),e.bindPress(),document.all&&(e.doc.onkeypress=function(){return e._ieEnter()}),e.dragUpload()},dragUpload:function(){var e=this,t=e.importTextarea;window.FileReader&&(t.bind("dragover",function(e){e.preventDefault(),e.stopPropagation()}),t.get(0).addEventListener("drop",function(t){t.preventDefault(),t.stopPropagation();var a=t.dataTransfer.files,n=a[0],r=new FileReader,i=n.type?n.type:"n/a";"text/plain"==i&&(r.onload=function(t){var a=t.target.result;""!=$.trim(a)&&(e.replaceText(a),e.updateData())},r.readAsText(n))},!1))},_ieEnter:function(){var e=this,t=e.win.event;if(13==t.keyCode)return this._saveRange(),this._insert("<br/>"),!1},_insert:function(e){var t=this;if(t.ieRange)t.ieRange.pasteHTML(e),t.ieRange.select(),t.ieRange=!1;else if(t.win.focus(),document.all)t.doc.body.innerHTML+=e;else{var a=win.getSelection(),n=a.getRangeAt(0),r=n.createContextualFragment(e);n.insertNode(r)}},_saveRange:function(){if(document.all&&!me.ieRange){var e=me.doc.selection;if(me.ieRange=e.createRange(),"Control"!=e.type){var t=me.ieRange.parentElement();"INPUT"!=t.tagName&&t!=document.body||(me.ieRange=!1)}}},getHtml:function(){var e=this,t=e.importTextarea?e.importTextarea.val():"";return t},replaceText:function(e){var t=this;t.importTextarea&&t.importTextarea.val(e)},bindPressTextarea:function(){var e=this,t=e.container.find(e.defConfig.uploadButton);window.navigator.userAgent.toLowerCase();t.bind("change",function(){var t=$(this).parent();e.checkFile(this,t)})},bindPress:function(){var e=this,t=e.container.find(e.defConfig.uploadButton),a=window.navigator.userAgent.toLowerCase();$(e.doc).bind("input",function(){e.updateData()}),a.indexOf("msie")>0&&($(e.doc.body).bind("keyup",function(){e.updateData()}),$(e.doc.body).bind("blur",function(){e.updateData()})),$(e.doc).bind("focus",function(){e.firstfocus&&(e.replaceText(" "),e.firstfocus=!1)}),$(e.doc).bind("blur",function(){var t=e.getText();""==$.trim(t)?e.showNormalTips():e.updateData()}),$(e.doc.body).bind("focus",function(){e.firstfocus&&(e.replaceText(" "),e.firstfocus=!1)}),$(e.doc.body).bind("blur",function(){var t=e.getText();""==$.trim(t)?e.showNormalTips():e.updateData()}),t.bind("change",function(){var t=$(this).parent();e.checkFile(this,t)})},iterator:function(e){var t,a=this,n=a.defConfig,r=[],i=[];return e=$.trim(e),e=e.replace(n.filtration,"|"),e=e.replace(/\s+/g," "),e=$.trim(e),i=e.split("|"),$.each(i,function(e){t=$.trim(this),""!=t&&r.push(t)}),r},checkResult:function(e,t){for(var a=t.length-1;a>=0;a--)if(t[a].join("")==e)return!1;return!0},filterLotters:function(e){var t=this,a="";return a=e.replace(/<br>+|&nbsp;+/gi," "),a=a.replace(/\s\s|[\s]|[,]+|[;]+|[，]+|[；]+/gi," "),a=a.replace(/<(?:"[^"]*"|'[^']*'|[^>'"]*)+>/g," "),a=a.replace(t.defConfig.checkFont,"")+" "},checkSingleNum:function(e){var t=this;return t.defConfig.checkNum.test(e)&&e.length==t.balls.length},checkBallIsComplete:function(e){var t=this;t.aData=[],t.vData=[],t.sameData=[],t.errorData=[],t.tData=[],result=[],result=t.iterator(t.filterLotters(e)).sort()||[];for(var a=result.length;a--;){if(t.checkSingleNum(result[a])){var n=result[a];n==result[a+1]?t.sameData.push(result[a].split("")):t.tData.push(result[a].split("")),t.vData.push(result[a].split(""))}else t.errorData.push(result[a].split(""));t.aData.push(result[a].split(""))}return t.tData.length>0?(t.isBallsComplete=!0,t.isFirstAdd?t.vData:t.tData):(t.isBallsComplete=!1,[])},countInstances:function(e,t){var a=[],n=0;do n=e.indexOf(t,n),n!=-1&&(a.push(n),n+=t.length);while(n!=-1);return a},removeOrderError:function(){var e=this,t=[],a=0,n=e.tData.length;for(a=0;a<n;a++)t[a]=e.tData[a].join("");t=$.trim(t.join(" ")),e.errorDataTips(),e.replaceText(t),e.errorData=[],e.sameData=[],""==t&&e.showNormalTips(),e.updateData()},removeOrderSame:function(){var e=this,t=[],a=0,n=e.tData.length;for(a=0;a<n;a++)t[a]=e.tData[a].join("");t=$.trim(t.join(" ")),e.sameDataTips(),e.replaceText(t),e.errorData=[],e.sameData=[],""==t&&e.showNormalTips(),e.updateData()},removeOrderAll:function(){var e=this;e.replaceText(" "),e.sameData=[],e.aData=[],e.tData=[],e.vData=[],o.getCurrentGameStatistics().reSet(),e.showNormalTips(),e.updateData()},checkFile:function(e,t){var a=e.value,n=a.substring(a.lastIndexOf("."),a.length),n=n.toLowerCase();return".txt"!=n?(alert("对不起，导入数据格式必须是.txt格式文件哦，请您调整格式后重新上传，谢谢 ！"),!1):void t[0].submit()},getFile:function(e){var t=this,a=t.container.find(":reset");e&&(t.replaceText(e),t.firstfocus=!1,t.updateData(),a.click())},errorTip:function(e,t){var a=this;alert(a.errorData.join())},sameDataTips:function(){var e=this,t=e.sameData,a="",n=o.getCurrentGameMessage(),r=[];if(""!=t.join("")){for(var i=0;i<t.length;i++)$.trim(t[i].join(""))&&r.push(t[i].join(""));a='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码重复，已进行自动过滤</h4><p class="pop-text" style="display:block">'+r.join(", ")+"</p>",n.show({type:"normal",closeText:"确定",closeFun:function(){this.hide()},data:{tplData:{msg:a}}})}},errorDataTips:function(){var e=this,t=e.errorData,a="",n=o.getCurrentGameMessage(),r=[];if(""!=t.join("")){for(var i=0;i<t.length;i++)$.trim(t[i].join(""))&&r.push(t[i].join(""));a='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码错误，已进行自动过滤</h4><p class="pop-text" style="display:block">'+r.join(", ")+"</p>",n.show({type:"normal",closeText:"确定",closeFun:function(){this.hide()},data:{tplData:{msg:a}}})}},ballsErrorTip:function(e,t){var a=this,n=a.errorData,r=a.sameData,i="",s="",u=o.getCurrentGameMessage(),l=[],c=[];if(""!=r.join("")){for(var m=0;m<r.length;m++)$.trim(r[m].join(""))&&c.push(r[m].join(""));s='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码重复，已进行自动过滤</h4><p class="pop-text" style="display:block">'+c.join(", ")+"</p>"}if(""!=n.join("")){for(var m=0;m<n.length;m++)$.trim(n[m].join(""))&&l.push(n[m].join(""));i='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码错误，已进行自动过滤</h4><p class="pop-text" style="display:block">'+l.join(", ")+"</p>"}u.show({type:"normal",closeText:"确定",closeFun:function(){this.hide()},data:{tplData:{msg:i}}})},reSet:function(){var e=this;e.isBallsComplete=!1,e.rebuildData(),e.updateData(),e.ranNumTag||e.showNormalTips(),e.removeRanNumTag()},formatViewBalls:function(e){for(var t=[],a=e.length,n=0;n<a;n++)t[n]=e[n].join("");var r=t.join("|");return r},makePostParameter:function(e,t){for(var a=[],e=t.lotterys,n=e.length,r=0;r<n;r++)a[r]=e[r].join("");return a.join("|")},getLottery:function(){var e=this,t=e.getHtml();if(""!=t)return e.checkBallIsComplete(t)},removeSameNum:function(e){var t,a=0,n=this,r=this.getBallData()[0].length;for(len=e.length,t=Math.floor(Math.random()*r);a<e.length;a++)if(t==e[a])return arguments.callee.call(n,e);return t},emptySameData:function(){this.sameData=[]},emptyErrorData:function(){this.errorData=[]},addRanNumTag:function(){var e=this;e.ranNumTag=!0,e.emptySameData(),e.emptyErrorData()},getTdata:function(){return this.tData},getOriginal:function(){return this.getTdata()},removeRanNumTag:function(){this.ranNumTag=!1},checkRandomBets:function(e,t){var a=this,n="undefined"==typeof e,e=e||{},r=[],t=t||0,i=(a.getBallData().length,a.getBallData()[0].length,o.getCurrentGameOrder().getTotal().orders);if(r=a.createRandomNum(),Number(t)>Number(a.getRandomBetsNum()))return r;if(n)for(var s=0;s<i.length;s++)if(i[s].type==a.defConfig.name){var u=i[s].original.join("").replace(/,/g,"");e[u]=u}return e[r.join("")]?(t++,arguments.callee.call(a,e,t)):r},randomNum:function(){var e=this,t=[],a=null,n=(e.getBallData(),e.defConfig.name,o.getCurrentGame().getCurrentGameMethod().getGameMethodName()),r=[],i=[];return e.addRanNumTag(),t=e.checkRandomBets(),i=t,r=e.combination(i),a={type:n,original:i,lotterys:r,moneyUnit:o.getCurrentGameStatistics().getMoneyUnit(),multiple:o.getCurrentGameStatistics().getMultip(),onePrice:o.getCurrentGame().getGameConfig().getInstance().getOnePrice(n),num:r.length},a.amountText=o.getCurrentGameStatistics().formatMoney(a.num*a.moneyUnit*a.multiple*a.onePrice),a},getHTML:function(){var e=o.getCurrentGame().getGameConfig().getInstance().getUploadPath(),t=o.getCurrentGame().getGameConfig().getInstance().getToken(),a=[];return a.push('<div class="balls-import clearfix">'),a.push('<form id="form1" name="form1" enctype="multipart/form-data" method="post" action="'+e+'" target="check_file_frame" style="position:relative;padding-bottom:10px;">'),a.push('<input name="_token" type="hidden" value="'+t+'" />'),a.push('<a style="display:none;" class="balls-example-danshi-tip" href="#">查看标准格式样本</a>'),a.push('<input type="reset" style="outline:none;-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);filter:alpha(opacity=0);opacity: 0;width:0px; height:0px;z-index:1;background:#000" />'),a.push('<iframe src="'+e+'" name="check_file_frame" style="display:none;"></iframe>'),a.push("</form>"),a.push('<div class="panel-select"><iframe style="width:100%;height:100%;border:0 none;background-color:#F9F9F9;" class="content-text-balls"></iframe></div>'),a.push('<div class="panel-btn">'),a.push('<a class="btn remove-error" href="javascript:void(0);">删除错误项</a>'),a.push('<a class="btn remove-same" href="javascript:void(0);">删除重复项</a>'),a.push('<a class="btn remove-all" href="javascript:void(0);">清空文本框</a>'),a.push("</div>"),a.push("</div>"),a.join("")}},l=e.Class(u,a);l.defConfig=r,s[t]=l}(betgame,"Danshi",betgame.GameMethod);