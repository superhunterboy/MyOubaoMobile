/*â€®*/var DSGLOBAL=window.DSGLOBAL||{};$(function(){function a(){var a=Number(d.outerHeight()),t=Number(l.outerHeight()),e=(Number(r.outerHeight()),$(window).height()),n=Number($selectPanel.outerHeight()),i=e-a-t-n;r.height(i)}var t="ontouchstart"in window?"tap":"click",e=function(){var a='<div class="sk-double-bounce ds-load-loading">                   <div class="sk-child sk-double-bounce1"></div>                   <div class="sk-child sk-double-bounce2"></div>                 </div>';return $(a)},n=function(a){if(!a)return"";var t=/(\d+)\.(\d+)/;return a.replace(t,"$1.<small>$2</small>")},i=["sunwukong.jpg","guanyin.jpg","rulai.jpg","tangseng.jpg","shaheshang.jpg","yudi.jpg"],o="/assets/dist/images/avatar/";DSGLOBAL.touchEvent=t,DSGLOBAL.getAjaxLoading=e,DSGLOBAL.dsAvatars=i,DSGLOBAL.dsAvatarPath=o,DSGLOBAL.modaldelay=3,DSGLOBAL.getMoneyFormatHtml=n;var s=$(".main-page"),r=$("#section",s),d=$("[data-fixed-top]:eq(0)"),l=$("[data-fixed-bottom]:eq(0)",s);$selectPanel=$(".bounsInfo",s),a(),$(".modal-body").css({"max-height":.7*$(window).height(),"overflow-y":"auto"}),$("[data-ds-avatar]").each(function(){var a=$(this).data("ds-avatar"),t=o+(i[a-1]||i[0]);$(this).replaceWith('<img src="'+t+'" alt="">')}),$("[data-money-format]").each(function(){var a=$(this),t=a.html(),t=n(t);a.html(t)}),$('[data-toggle="tooltip"]').tooltip({trigger:t}),$('[data-toggle="modal"]').on(t,function(){var a=$(this).data("target");$(a).modal()}),$('[data-toggle="dropdown"]').dropdown(),$("[data-carousel]").carousel({interval:5e3}).on({swiperight:function(){$(this).carousel("prev")},swipeleft:function(){$(this).carousel("next")}}),$(".ds-tabs").each(function(){function a(a){return!(a>=n||a<0)&&void t.eq(a).tab("show")}var t=($(this),$('a[data-toggle="tab"]',this)),e=$(".tab-content",this),n=t.length,i=t.filter(".active").index(),o=1;e.on({swiperight:function(){i--,a(i)},swipeleft:function(){i++,a(i)}}),t.on("shown.bs.tab",function(a){var e=t.index(this),n=$(this).attr("href"),s=$(window).width();o=e<i?-1:1,i=e,$(n).css("left",o*s),$(n).animate({left:0}),$(document).trigger("dsTabShown:callback",[t,$(this)])})});var c=s,h=function(a,t,e){$(document).trigger("dsPageAnimate:before",[$(a),$(t),e]),$(a).removeClass("ds-hide").addClass("ds-show");var n=$(a).find("[data-page-load-content]");n.length&&n.replaceWith(n.html()),$(t).removeClass("ds-show").addClass("ds-hide"),c=a,$(document).trigger("dsPageAnimate:after",[$(a),$(t),e])};$("body").on(t,"[data-page-tab]",function(a){a.preventDefault();var t=$(this).data("page-tab");h(t,c,$(this))}),$('[role="ds-tabload"]').each(function(a){var n,i=$('[data-toggle="tabload"]',this),o=$(this).data("target");i.on(t,function(a){a.preventDefault();var t=$(this).parent(),i=$(this).attr("href"),s=$(this).data("target")||o;return!(t.hasClass("active")||!i)&&(t.addClass("active").siblings().removeClass("active"),void $.ajax({url:i,dataType:"html",method:"GET",beforeSend:function(){n=n||e(),$(s).append(n)},success:function(a){$(document).trigger("dsTabLoad:success",[$(s),a,n])},complete:function(){},error:function(){n.remove()}}))})}),$("body").on(t,"a[href]",function(a){var t=$(this).attr("href"),e=$(this).data();if(t&&t.indexOf("javascript:")<0)"pageTab"in e||"toggle"in e||"virtualMouseBindings"in e||(a.preventDefault(),window.location.href=t);else if($(this).hasClass("history-back")){a.preventDefault();var n=document.referrer;n.indexOf(DSGLOBAL.domain)!=-1&&(window.location.href=n)}}),$("body").on(t,"[data-table-link]",function(a){var t=$(this).data("table-link");t&&(window.location.href=t)}),$("body").on(t,"[data-refresh-balance]",function(){var a=this,t=$(a).data("refresh-balance");if($(a).hasClass("onhandled")||!t)return!1;$(a).addClass("onhandled");var e=function(t){if(0!=t.isSuccess){if(t.data.available){var e=n(t.data.available);$("[data-user-balance]").html(e)}if(t.data.profit){var i=n(t.data.profit);$("[data-user-profit]").html(i)}}else"loginTimeout"==t.type&&confirm(t.Msg)&&window.location.reload();$(a).removeClass("onhandled")};return $.ajax({url:t,type:"GET",success:function(a){var a=$.parseJSON(a);e(a)},error:function(t){$(a).removeClass("onhandled")}}),!1}),setInterval(function(){$("body").find("[data-refresh-balance]").eq(0).trigger(t)},15e3),$("[data-dsform-dropdown] > li, [data-dsform-dropdown] > .ds-cell").on(t,function(a){var t=$(this);if(t.hasClass("active"))return!1;var e=t.data(),n=t.closest(".dropdown");$.each(e,function(a,t){var e=n.find("[data-choose-"+a+"]");if(e.length)return e.is("input")?e.val(t):void e.html(t)}),t.addClass("active").siblings().removeClass("active")}).filter("[data-init]").trigger(t)});