/*‮*/!function(t,e){function i(){this.init()}var n=gameConfigData,a={},s={},o={},r=[];r=gameSelfConfig.gamediceBallLists;var c=function(){var t,e,i,r=n.wayGroups;return $.each(r,function(){t=this,t.fullname_en=[t.name_en],t.fullname_cn=[t.name_cn],a[""+t.id]=t,t.children&&$.each(t.children,function(){e=this,e.fullname_en=t.fullname_en.concat(e.name_en),e.fullname_cn=t.fullname_cn.concat(e.name_cn),a[""+e.id]=e,e.children&&$.each(e.children,function(){i=this,i.fullname_en=e.fullname_en.concat(i.name_en),i.fullname_cn=e.fullname_cn.concat(i.name_cn),o[i.fullname_en.join(".")]=i,s[""+i.id]=i})})}),{byName:o,byId:s}},l={init:function(){this.setGameMethods(),this.setBallLists()},getConfig:function(){return n},setGameMethods:function(){this.gameMethods=c()},getGameMethods:function(t){var t=t||"byId";return this.gameMethods[t]},setBallLists:function(){var t=this.getGameMethods("byName"),e=[];return $.each(r,function(i,n){var a=n.name,s=-1;t[a]&&(s=t[a].id)&&(n.id=s,n.typeName=t[a].name_cn),e.push(n)}),this.ballLists=e},getBallLists:function(){return this.ballLists},getBallsById:function(t){var e=this.gameMethods.byId;return e[t]},getGameLimit:function(){return n.prizeSettings},getGameId:function(){return n.gameId},getGameNameEn:function(){return n.gameNameEn},getGameNameCn:function(){return n.gameNameCn},getTraceMaxTimes:function(){return Number(n.traceMaxTimes)},getCurrentLastTime:function(){return n.currentNumberTime},getCurrentTime:function(){return n.currentTime},getCurrentGameNumber:function(){return n.currentNumber},getLastGameNumber:function(){return n.issueHistory.last_number.issue},getLotteryBalls:function(){return n.issueHistory.last_number?n.issueHistory.last_number.wn_number:""},getLotteryNumbers:function(){return n.issueHistory.issues||[]},getGameNumbers:function(){return n.gameNumbers},getLimitByMethodId:function(t,e){var e=e||1,i=Number(this.getPrizeById(t).max_multiple);return i/e},getSubmitUrl:function(){return n.submitUrl},getUpdateUrl:function(){return n.loaddataUrl},getUploadPath:function(){return n.uploadPath},getJsPath:function(){return n.jsPath},getDefaultMethodId:function(){return n.defaultMethodId},getUserName:function(){return n.username},getMethods:function(){return n.wayGroups},getMethodById:function(t){return this.getGameMethods("byId")[""+t]},getPrizeById:function(t){return n.prizeSettings[""+t]},getMethodNodeById:function(t){return nodeCacheById[""+t]},getMethodNameById:function(t){var e=this.getMethodById(t);return e?e.name_en:""},getMethodCnNameById:function(t){var e=this.getMethodById(t);return e?e.name_cn:""},getMethodFullNameById:function(t){var e=this.getMethodById(t);return e?e.fullname_en:""},getMethodCnFullNameById:function(t){var e=this.getMethodById(t);return e?e.fullname_cn:""},getOnePriceById:function(t){return Number(this.getMethodById(t).price)},getToken:function(){return n._token},updateConfig:function(t){$.extend(!0,n,t),this.init()},getOptionalPrizes:function(){return n.optionalPrizes},setOptionalPrizes:function(){return $("#J-bonus-select-value").val()},getDefaultCoefficient:function(){return"0.50"},getDefaultMultiple:function(){return n.defaultMultiple?n.defaultMultiple:1},getLoadIssueUrl:function(){return n.loadIssueUrl},getMaxPrizeGroup:function(){return n.maxPrizeGroup}};return i.prototype=l,t.GameConfig=i}(window),function(t){function e(e,i){this.opts=t.extend({sheetElement:"#J-dice-sheet",barElement:"#J-dice-bar",chipsAnimationDelay:600,chipsAnimationDelay2:100,chipSize:[50,46],chipStep:2,chipZindex:2,actionTipsTxt:"该注单超过限额,无法再增加筹码",actionTipsDelay:600,chips:[1,2,5,10,20,50,100,500,1e3,5e3],chipsSelected:[10,20,50,100,500],prizeGroup:1800,gameConfig:function(){},message:function(){},allowPrinted:!1,gameHistory:function(){},createOddsTips:function(){},initContinus:1,initMultiple:1,maxMultiple:9999,multipleCheckDisabled:!1,debugs:!0},i),this.slides=[],this.$t=t(e),this.betAmount=0,this.betCountAmount=0,this.continusTimes=1,this.multipleTimes=1,this.gamelimit={},this.debugs=this.opts.debugs,this.init()}e.prototype={init:function(){var e=this,i=e.opts;e.gameConfig=i.gameConfig,e.message=i.message,e.gameHistory=i.gameHistory,e.setGameLimit(e.gameConfig.getGameLimit()),e.setMoneyUnit(e.gameConfig.getDefaultCoefficient()),e.setUserPrizeGroup();var n=e.gameConfig.getConfig();e.gameMethods=n.gameMethods,e.revocationIsEnabled=!0,e.multipleCheckDisabled=i.multipleCheckDisabled,e.actionLogs=[],e.betData={},e.$sheetWrap=t(i.sheetElement),e.$bar=t(i.barElement),e.createDiceSheet(),e.createBalance(),e.createDiceChip(),e.$continus=e.counterHtml(),e.continusCounter=e.$continus.counter({max:e.gameConfig.getTraceMaxTimes()}),e.$multiple=e.counterHtml(),e.multipleCounter=e.$multiple.counter({max:i.maxMultiple}),e.createActionButtons(),e.createHistoryToggle(),e.createGameTips(),e.createOddsTips(),e.createActionTips(),e.setActionTipsTxt(i.actionTipsTxt),e.chips=i.chips.reverse(),e.setChipValue(i.chipsSelected[0]),e.setBetAmount(0),e.setContinusTimes(i.initContinus),e.setMultipleTimes(i.initMultiple),e.createMaxMultipleTips(),e.setAnimationStatus(!1),e.checkActionsStatus(),e.bindEvent()},createDiceSheet:function(){var e="";return t.each(this.gameConfig.getBallLists(),function(t,i){e+='<div data-view="'+i.viewBalls+'" data-methodid="'+i.id+'" class="dice-sheet dice-sheet-'+t+'" data-name="'+i.name+'">',e+='<div class="dice-sheet-bg"></div>',e+="</div>"}),this.$sheetWrap.append(e),this.$sheets=this.$sheetWrap.find(".dice-sheet")},createBalance:function(){var t='<div class="dice-balance"><div class="bet-amount"><label>下注额:</label>￥<span data-count-amount>0.00</span></div><div class="bet-balance"><label>余额:</label>￥<span data-user-account-balance>0</span><i class="ui-icon bet-balance-refresh" data-refresh-balance>刷新</i><a class="ui-icon bet-balance-recharge" data-action="recharge" href="javascript:void(0)">充值</a></div></div>';this.$bar.append(t),this.$betCountAmount=this.$bar.find("[data-count-amount]"),this.$balancerecharge=this.$bar.find('[data-action="recharge"]')},createDiceChip:function(){var e=this,i=e.opts,n=i.chips,a=i.chipsSelected,s='<div class="dice-chip-wrap">';html1='<div class="dice-chip-choose">',html2='<div class="dice-chip-custom">',t.each(n,function(e,i){var n=t.inArray(i,a)<0?" dice-chip-hide":"";html1+='<div data-value="'+i+'" class="dice-chip dice-chip-'+i+n+'">'+i+"</div>",html2+='<div data-value="'+i+'" class="dice-chip-mirror dice-chip-'+i+n+'">'+i+"</div>"}),s+=html1+'<div class="dice-chip-shadow"></div></div>',s+='<div class="dice-chip-button">自定义</div>',s+=html2+"</div>",e.$bar.append(s),this.$chipsWrap=this.$bar.find(".dice-chip-choose"),this.$chipsButton=this.$bar.find(".dice-chip-button"),this.$chipsCustom=this.$bar.find(".dice-chip-custom"),this.$chipsMirror=this.$bar.find(".dice-chip-mirror"),this.$chips=this.$bar.find(".dice-chip");var o=[];this.$chipsMirror.each(function(){t(this).hasClass("dice-chip-hide")||o.push(t(this))}),this.setChipsMirror(o)},createActionButtons:function(){var t='<div class="action-buttons">';return t+='<button class="ui-button ui-button-primary button-bet" data-action="bet">下注</button>',t+='<button class="ui-button button-revocation" data-action="revocation">撤销</button>',t+='<button class="ui-button button-clear" data-action="clear">清空</button>',t+="</div>",this.$bar.append(t),this.$actions=this.$bar.find("button[data-action]")},createHistoryToggle:function(){var t='<div class="history-toggle"> \t\t\t\t\t<span>投注记录</span> \t\t\t\t\t<i></i> \t\t\t\t</div>';this.$bar.append(t)},createGameTips:function(){var e=this.gameConfig.getGameMethods("byName"),i="";return t.each(e,function(t,e){i+='<div class="ui-icon game-tips game-tips-'+e.fullname_en[2]+'" data-name="'+e.fullname_en.join(".")+'" data-tips-title="'+(e.bet_note||e.name_cn)+'"></div>'}),this.$sheetWrap.append(i),this.$tips=this.$sheetWrap.find(".game-tips")},createOddsTips:function(){var t=this.gameConfig.getBallLists(),e=this.getGameLimit(),i=Number(this.getUserPrizeGroup()),n=this.getMaxPrizeGroup(),a="";return a=this.opts.createOddsTips(t,e,i,n),this.$sheetWrap.append(a),this.$oddsTips=this.$sheetWrap.find(".odds-tips")},createActionTips:function(){this.$actionTips=t('<div class="ui-tips ui-tips-alert ui-tips-bottom"><span class="ui-tips-text"></span><i class="ui-tips-arrow"></i></div>'),this.$actionTips.css({position:"absolute",zIndex:100}).appendTo("body").animate({opacity:"hide"},0)},createMaxMultipleTips:function(){this.$maxMultipleTips=t('<div class="ui-tips ui-tips-alert ui-tips-top"><span class="ui-tips-text"></span><i class="ui-tips-arrow"></i></div>'),this.$maxMultipleTips.css({position:"absolute",zIndex:100}).appendTo("body").animate({opacity:"hide"},0)},counterHtml:function(){var e='<div class="ui-simulation-wrap"><div class="ui-simulation-title" data-counter-title></div><div class="ui-simulation-counter"><span class="ui-icon counter-action counter-decrease" data-counter-action="decrease">－</span><input type="text" value="1" class="J_counter"><span class="ui-icon counter-action counter-increase" data-counter-action="increase">＋</span></div></div>';return t(e).appendTo(this.$bar)},getTargetElement:function(){return this.$t},getChipsElements:function(){return this.$chips},getChipsWrapElement:function(){return this.$chipsWrap},getChipsButtonElements:function(){return this.$chipsButton},getChipsCustomElements:function(){return this.$chipsCustom},getChipsMirrorElements:function(){return this.$chipsMirror},getSheetsElements:function(){return this.$sheets},getActionsElements:function(){return this.$actions},getBalanceRechargeElements:function(){return this.$balancerecharge},getTipsElements:function(){return this.$tips},getOddsTipsElements:function(){return this.$oddsTips},setSelectedChipElements:function(t){this.$selectedChip=t},getSelectedChipElements:function(){return this.$selectedChip},getActionTipsElements:function(){return this.$actionTips},getMaxMultipleTipsElements:function(){return this.$maxMultipleTips},getContinusCounter:function(){return this.continusCounter},getMultipleCounter:function(){return this.multipleCounter},setAnimationStatus:function(t){this.isAnimation=t},getAnimationStatus:function(){return this.isAnimation},setActionTipsTxt:function(t){this.actionTipsTxt=t},getActionTipsTxt:function(){return this.actionTipsTxt},setChipsMirror:function(t){this.chipsMirror=t},getChipsMirror:function(){return this.chipsMirror},setChipValue:function(t){this.chipValue=t},getChipValue:function(t){return this.chipValue},setMoneyUnit:function(t){this.moneyunit=Number(t||"0.50")},getMoneyUnit:function(){return this.moneyunit},setGameLimit:function(t){if(t)return this.gamelimit=t},getGameLimit:function(){return this.gamelimit},setUserPrizeGroup:function(t){if(!t)var e=this.gameConfig.getOptionalPrizes(),i=this.gameConfig.getMaxPrizeGroup(),t=Number(e[e.length-1].prize_group||this.opts.prizeGroup);this.prizeGroup=Number(t),this.maxPrizeGroup=Number(i)},getUserPrizeGroup:function(){return this.prizeGroup},getMaxPrizeGroup:function(){return this.maxPrizeGroup},disableRevocation:function(){this.revocationIsEnabled=!1,this.getActionsElements().filter('[data-action="revocation"]').addClass("disabled")},enableRevocation:function(){this.revocationIsEnabled=!0,this.actionLogs.length&&this.getActionsElements().filter('[data-action="revocation"]').addClass("disabled")},setSheetData:function(t,e){var i=this.getSheetData(t);if(e=parseFloat(e)||0,0!=e){t.data("value",i+e),this.rebuildChip(t),this.setBetAmount(e);var n=this.getSheetsElements().index(t.eq(0));this.setBetData(n,e),t.tips()&&t.tips().setText(i+e),this.checkActionsStatus()}},getSheetData:function(t){return parseFloat(t.data("value"))||0},setBetCountAmount:function(){var t=this.getBetAmount(),e=this.getMultipleTimes(),i=this.getContinusTimes(),n=t*e*i;return this.$betCountAmount.text(this.currency(n)),this.betCountAmount=n},getBetCountAmount:function(){return this.betCountAmount},setBetAmount:function(t){t=parseFloat(t)||0,this.betAmount+=t,this.setBetCountAmount()},getBetAmount:function(){return this.betAmount},setContinusTimes:function(t){t=parseFloat(t)||0,this.continusTimes=t,this.setBetCountAmount()},getContinusTimes:function(){return this.continusTimes||1},setBetDataMultiple:function(e,i){var n=this,a=n.getBetData()[e]||{};t.isEmptyObject(a)||(a.multiple=i*a.amount/(a.onePrice*a.moneyunit))},setMultipleTimes:function(e){var i=this,e=parseFloat(e)||1;i.multipleTimes=e,i.setBetCountAmount(),t.each(i.getBetData(),function(t,n){i.setBetDataMultiple(t,e)})},getMultipleTimes:function(){return this.multipleTimes},setBetData:function(e,i){var n=this,a=n.getBetData()[e]||{};t.isEmptyObject(a)&&(n.getBetData()[e]=a);var s=a.amount?a.amount+i:i,o=n.getUserPrizeGroup(),r=n.getMaxPrizeGroup();if(o>r&&(o=r),s){var c=n.gameConfig.getBallLists()[e],l=n.getSheetsElements().eq(e).data("methodid"),u=n.getMoneyUnit(),h=n.getMultipleTimes(),d=n.gameConfig.getOnePriceById(l);return a={ball:c.ball,viewBalls:c.viewBalls,jsId:e,wayId:l,moneyunit:u,multiple:h*s/(d*u),amount:s,onePrice:d,num:1,prizeGroup:o,type:c.name},n.betData[e]=a}delete n.betData[e]},getBetData:function(){return this.betData},updateBetDataWayId:function(t,e){return this.betData[t]&&(this.betData[t].wayId=e)},getBalance:function(e){t("[data-refresh-balance]").eq(0).trigger("click")},getServerDynamicConfig:function(){var e=this;e.isLogout||t.ajax({url:e.gameConfig.getUpdateUrl(),dataType:"JSON",success:function(i){i="string"==t.type(i)?t.parseJSON(i):i;e.message;if("loginTimeout"==i.type)e.isLogout=!0,e.getTargetElement().trigger("dsgame.dice.logout");else if(1==Number(i.isSuccess)){var n=i.data;e.gameConfig.updateConfig(n),e.getContinusCounter().setMaxValue(e.gameConfig.getTraceMaxTimes()),e.setGameLimit(e.gameConfig.getGameLimit()),e.updateSheetsData();var a=e.gameConfig.getConfig();e.getTargetElement().trigger("dsgame.dice.dynamicConfigChange",a)}}})},getServerIssues:function(){var e=this;e.isLogout||t.ajax({url:e.gameConfig.getLoadIssueUrl(),dataType:"JSON",success:function(i){i="string"==t.type(i)?t.parseJSON(i):i,"loginTimeout"==i.type?(e.isLogout=!0,e.getTargetElement().trigger("dsgame.dice.logout")):e.getTargetElement().trigger("dsgame.dice.serverIssuesChange",i)}})},updateSheetsData:function(){var e=this,i=e.gameConfig.getBallLists(),n=e.getSheetsElements();t.each(i,function(t,i){var a=n.eq(t),s=a.data("methodid"),o=i.id;s!=o&&(a.attr("data-methodid",o).data("methodid",o),e.updateBetDataWayId(t,o))})},bindEvent:function(){var t=this;t.getContinusCounter().setOnSetValue(function(e){t.setContinusTimes(e)});var e=t.getMultipleCounter().$ctrl.filter('[data-counter-action="increase"]'),i="当前投注方案下无法再增加倍数了";t.getMultipleCounter().setBeforeSetValue(function(n){var a=t.checkMultipleTimes(n);return a<n&&t.showMaxMultipleTips(e,i,1500),a}),t.getMultipleCounter().setOnSetValue(function(e){t.setMultipleTimes(e)}),t.$t.on("animate.start",function(){return t.setAnimationStatus(!0)}).on("animate.end",function(){return t.setAnimationStatus(!1)}),t.isReady=!0},ready:function(t){var e=this;t&&"[object Function]"==Object.prototype.toString.call(t)&&!function(){e.isReady?t():setTimeout(arguments.callee,10)}()},chipIsOverLimit:function(t,e){var i=this,n=t&&t.data()||{},a=i.getGameLimit(),s=n.methodid||-1,o=i.getMultipleTimes(),e=Number(e)||0;if(!a[s]||!a[s].max_multiple)return!1;var r=a[s].max_multiple*(i.gameConfig.getOnePriceById(s)||2),c=Number(n.value||0);return(c+e)*o>r},checkMultipleTimes:function(e){var i=this;return e<=i.getMultipleTimes()||i.multipleCheckDisabled?e:(i.getSheetsElements().each(function(n,a){var s=t(a).data("value"),o=t(a).data("methodid");s&&o&&(e=Math.min(e,i.getAvailableTimes(s,o)))}),e)},getAvailableTimes:function(t,e){var i=this,n=i.getGameLimit(),t=Number(t)||0,a=i.getMultipleCounter().getMaxValue();if(!n[e]||!n[e].max_multiple)return i.debug("无法获取到玩法id为"+e+"的倍数限额！"),a;if(t<=0)return i.debug("当前玩法投注额为0，无需获取倍数限额！"),a;var s=n[e].max_multiple*(i.gameConfig.getOnePriceById(e)||2);return Math.floor(s/t)},checkOrder:function(){var e=this,i=e.getBetData(),n=e.getGameLimit(),a=[];return t.isEmptyObject(i)?[]:(t.each(i,function(t,i){var s=i.wayId,o=Number(i.amount),r=n[s].max_multiple*(e.gameConfig.getOnePriceById(s)||2);o>r&&a.push({idx:t,viewBalls:i.viewBalls,name:n[s].name,limit:r})}),a)},showActionTips:function(t,e,i){var n=this,a=n.getActionTipsElements(),s=t.offset(),o=10,i=i||n.opts.actionTipsDelay;n.actionTipsTimer&&(clearTimeout(n.actionTipsTimer),n.actionTipsTimer=null),e&&a.find(".ui-tips-text").html(e),a.css({left:s.left+(t.outerWidth()-a.outerWidth())/2,top:s.top+t.outerHeight()+o}).animate({opacity:"show"},function(){n.actionTipsTimer=setTimeout(function(){a.animate({opacity:"hide"})},i)})},showMaxMultipleTips:function(t,e,i){var n=this,a=n.getMaxMultipleTipsElements(),s=t.offset(),o=40,i=i||n.opts.actionTipsDelay;n.maxMultipleTipsTimer&&(clearTimeout(n.maxMultipleTipsTimer),n.maxMultipleTipsTimer=null),e&&a.find(".ui-tips-text").html(e),a.css({left:s.left+(t.outerWidth()-a.outerWidth())/2,top:s.top-t.outerHeight()-o}).animate({opacity:"show"},function(){n.maxMultipleTipsTimer=setTimeout(function(){a.animate({opacity:"hide"})},i)})},moveChip:function(e){if(e&&e.length){var i=this,n=i.getSelectedChipElements(),a=n.clone(),s=a.data("value"),o=e.offset(),r=n.offset();i.getTargetElement().trigger("animate.start"),a.appendTo(i.$t);var c={position:"absolute",top:r.top,left:r.left,marginTop:0,zIndex:i.opts.chipZindex},l={top:r.top-20},u={top:o.top+(e.outerHeight()-a.outerHeight())/2,left:o.left+(e.outerWidth()-a.outerWidth())/2};if(i.chipIsOverLimit(e,s)){var h=e.data("methodid"),d=i.getActionTipsTxt(),p=i.getGameLimit();if(p[h]){var p=p[h],m=i.getMultipleTimes(),f=p.max_multiple*i.gameConfig.getOnePriceById(h);d+="<br/>当前倍投数:"+m+"&nbsp;&nbsp;当前可投注额:"+Math.floor(f/m),d+="<br/>"+p.name+"玩法的总投注限额为"+f}a.css(c).animate(l,i.opts.chipsAnimationDelay2).animate(u,i.opts.chipsAnimationDelay).animate(r,i.opts.chipsAnimationDelay,function(){t(this).remove(),i.getTargetElement().trigger("animate.end")}),i.showActionTips(e,d,1500)}else a.css(c).animate(l,i.opts.chipsAnimationDelay2).animate(u,i.opts.chipsAnimationDelay,function(){i.addActionLog({from:i.getSelectedChipElements(),to:e,amount:s,type:"bet"}),i.setSheetData(e,s),t(this).remove(),i.getTargetElement().trigger("animate.end")})}},rebuildChip:function(e,i){if(e.length){var n=this,i=i||n.getSheetData(e),a=n.getChipCombination(i),s=-n.opts.chipSize[1]/2,o=n.opts.chipStep;n.removeAllChips(e),t.each(a,function(i,n){var a=t('<div data-value="'+n+'" class="dice-chip dice-chip-'+n+'">'+n+"</div>");a.css({marginTop:s-i*o}).appendTo(e)})}},getChipCombination:function(e){e=parseFloat(e)||0;var i=this.chips,n=[];return t.each(i,function(t,i){var a=Math.floor(e/i);if(a>=1)for(e%=i;a>0;a--)n.push(i)}),n},removeAllChips:function(t){t.find(".dice-chip").remove()},disabledDom:function(e){var i=t(e);i.length&&i.prop("disable",!0).addClass("disabled")},enabledDom:function(e){var i=t(e);i.length&&i.prop("disable",!1).removeClass("disabled")},checkActionsStatus:function(){var e=this,i=!t.isEmptyObject(e.getBetData()),n=!(!e.revocationIsEnabled||!e.actionLogs.length),a=i;t.each({bet:i,revocation:n,clear:a},function(t,i){var n=e.$actions.filter('[data-action="'+t+'"]');i?n.prop("disable",!1).removeClass("disabled"):n.prop("disable",!0).addClass("disabled")})},addActionLog:function(t){this.actionLogs.push(t)},removeActionLog:function(){return this.actionLogs.pop()},moveAllChips:function(e,i){var n=this,a=n.$sheets.find(".dice-chip"),s=a.length,e=e||{top:280,left:"50%"};a.each(function(a,o){var r=t(this),c=r.offset(),l=r.clone();l.css({position:"absolute",left:c.left,top:c.top,zIndex:n.opts.chipZindex}).appendTo("body").animate({top:e.top,left:e.left,opacity:0},n.opts.chipsAnimationDelay,function(){t(this).remove()}),r.remove(),a>=s-1&&(n.resetData(),i&&t.isFunction(i)&&setTimeout(i,n.opts.chipsAnimationDelay+200))})},actionRevocation:function(){var e=this,i=e.removeActionLog(),n=i.type||"",a=i.amount||0,s=i.from||t(null),o=i.to||t(null);if(e.getTargetElement().trigger("animate.start"),console.log(n),"recycle"!=n&&e.setSheetData(o,-a),"bet"==n){var r=s.clone(),c=o.offset(),l=s.offset();s.hasClass("dice-chip-hide")&&(l=s.parent().offset()),r.appendTo(e.$t);var u=({top:c.top+o.outerHeight()},{top:l.top,left:l.left,opacity:0});r.css({position:"absolute",top:c.top+(o.outerHeight()-r.outerHeight())/2,left:c.left+(o.outerWidth()-r.outerWidth())/2,zIndex:e.opts.chipZindex}).animate(u,e.opts.chipsAnimationDelay,function(){t(this).remove(),e.getTargetElement().trigger("animate.end")})}else if("move"==n||"recycle"==n){var h=e.getChipCombination(a),c=o.offset(),l=s.offset();t.each(h,function(i,n){var a=t('<div data-value="'+n+'" class="dice-chip dice-chip-'+n+'">'+n+"</div>").appendTo(e.$t),r=a.outerWidth(),u=a.outerHeight();a.css({position:"absolute",top:c.top+(o.outerHeight()-u)/2,left:c.left+(o.outerWidth()-r)/2,zIndex:e.opts.chipZindex}).animate({top:l.top+(s.outerHeight()-u)/2,left:l.left+(s.outerWidth()-r)/2},e.opts.chipsAnimationDelay,function(){e.setSheetData(s,n),t(this).remove(),e.getTargetElement().trigger("animate.end")})})}e.checkActionsStatus()},actionClear:function(){var t=this.getChipsWrapElement(),e=t.offset(),i={top:e.top+t.outerHeight()/2,left:e.left+t.outerWidth()/2};this.moveAllChips(i)},actionBet:function(){var e=this,i=e.checkOrder();if(i.length){var n=[],a=[];return t.each(i,function(t,e){n.push(e.name+e.viewBalls),a.push({idx:e.idx,value:e.limit})}),void e.message.show({type:"normal",title:"投注超出了倍数限制！",confirmIsShow:!0,confirmText:"自动调整",closeText:"手动调整",confirmFun:function(){var i=e.getSheetsElements();t.each(a,function(t,n){var a=i.eq(n.idx),s=a.data("value");e.setSheetData(a,-(s-n.value)),e.disableRevocation()}),e.message.hide()},data:{tplData:{msg:"您的投注内容中“"+n.join("|")+"”超出倍数限制，请选择调整方式！"}}})}var s=this.$sheetWrap,o=s.offset(),r={top:o.top-50,left:o.left+s.outerWidth()/2},c=e.getSubmitData();if(t.isEmptyObject(c)||t.isEmptyObject(c.balls))return void e.message.show({type:"mustChoose",msg:"请至少选择一注投注号码！",data:{tplData:{msg:"请至少选择一注投注号码！"}}});e.message.show({type:"checkLotters",msg:"请核对您的投注信息！",confirmIsShow:!0,confirmFun:function(){e.postLock||t.ajax({url:e.gameConfig.getSubmitUrl(),data:c,dataType:"json",method:"POST",cache:!1,beforeSend:function(){e.doPostLock(),e.getTargetElement().trigger("dsgame.dice.beforeSend",e.message)},success:function(t){t.printIsShow=e.opts.allowPrinted,1==Number(t.isSuccess)?(e.message.hide(),e.moveAllChips(r,function(){setTimeout(function(){e.message.show(t),e.resetData()},e.chipsAnimationDelay),e.afterSubmitSuccess(t),e.getTargetElement().trigger("dsgame.dice.afterSubmitSuccess",e.message)})):e.message.show(t),e.opts.allowPrinted||e.message.win.hidePrintButton(),e.cancelPostLock()},complete:function(){e.getTargetElement().trigger("dsgame.dice.afterSubmit",e.message)},error:function(t){e.cancelPostLock()}})},cancelIsShow:!0,cancelFun:function(){e.cancelPostLock(),this.hide()},normalCloseFun:function(){e.cancelPostLock()},callback:function(){},data:{tplData:{lotteryDate:c.ordersNumber,lotteryName:e.gameConfig.getGameNameCn(),lotteryInfo:function(){for(var t="",i=c.balls,n=0;n<i.length;n++){var a=i[n];t+='<div class="game-submit-confirm-list">'+e.gameConfig.getBallLists()[a.jsId].typeName+" "+a.viewBalls+"</div>"}return t},lotteryamount:c.amount}}})},doPostLock:function(){var t=this;t.postLock=!0},cancelPostLock:function(){var t=this;t.postLock=!1},resetData:function(){this.removeAllChips(this.$sheetWrap),this.betData={},this.actionLogs=[],this.checkActionsStatus(),this.betAmount=0,this.continusCounter.setValue(0),this.getContinusCounter().setValue(0),this.multipleCounter.setValue(1),this.getMultipleCounter().setValue(1),this.setBetCountAmount(),this.$sheets.data("value",0),this.getBalance()},getSubmitData:function(){var e=this,i={},n=e.getContinusTimes(),a=[],s=e.getBetData(),o={};if(t.isEmptyObject(s))return{};t.each(s,function(t,e){a.push(e)});var r=e.gameConfig.getGameNumbers();return t.each(r,function(t,e){t>=n||(i[e.number]=1)}),o={gameId:e.gameConfig.getGameId(),traceWinStop:0,traceStopValue:0,isTrace:e.getContinusTimes()>1?1:0,multiple:e.getMultipleTimes(),trace:n,amount:e.currency(e.getBetCountAmount()),balls:a,orders:i}},renderSheetFromData:function(e){var i=this,n=e.balls||{};i.getMoneyUnit();t.isEmptyObject(n)||(i.resetData(),t.each(n,function(t,e){var n=i.getSheetsElements().filter(".dice-sheet-"+e.jsId);i.setSheetData(n,e.amount)}),i.setContinusTimes(e.trace),i.setMultipleTimes(e.multiple))},afterSubmitSuccess:function(t){this.getBalance()},letterCapitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},currency:function(t,e,i){if(e=e||2,i=i||3,isNaN(t)||t<=0)return"0.00";var n="\\d(?=(\\d{"+(i||3)+"})+"+(e>0?"\\.":"$")+")";return t.toFixed(Math.max(0,~~e)).replace(new RegExp(n,"g"),"$&,")},moneyForamtToFloat:function(t){return parseFloat(t.replace(/[^\d\.-]/g,""))},debug:function(){this.debugs&&window.console&&console.log&&console.log(arguments)}},t.fn.dsgamedice=function(i){var n;return this.each(function(){n=t.data(this,"dsgamedice"),n||(n=t.data(this,"dsgamedice",new e(this,i)))}),n}}(jQuery),function(t){function e(e,i){this.opts=t.extend({ballsize:5,initball:"0,0,0,0,0",loop:5,timeout:5e3,delay:150,offset:[80,110],showHandbar:!0,showLamp:!0,handbar:".handle_hand",lamp:".lamp",debugs:!0},i),this.slides=[],this.size=this.opts.ballsize,this.$t=t(e),this.balls=[],this.callback=function(){},this.errors={invalidBallFormat:"彩球数据格式错误"},this.debugs=this.opts.debugs,this.init()}e.prototype={init:function(){var e=this,i=e.opts;e.checkballs(i.initball)!=e.size&&alert(e.errors.invalidBallFormat),e.opts.showHandbar&&(e.$handles=t(i.handbar).children()),e.createdom(),e.opts.showLamp&&e.preloadLightImg()},checkballs:function(t){var e=this,i=0;if(t&&"string"==typeof t&&(t=t.split(",")),t&&"[object Array]"===Object.prototype.toString.call(t)&&t.length==e.size){e.balls=t;for(var n=0;n<t.length;n++){var a=Number(t[n]);if(a<0||a>9)break;i++}}return i},createdom:function(){for(var e=this,i=e.opts,n=e.balls,a=0;a<e.size;a++){var s="position:absolute;top:0;left:"+a*e.opts.offset[0]+"px;float:none;";s+="height:"+10*i.offset[1]*(i.loop+3)+"px",e.slides.push(t("<div>",{class:"flipball flipball_"+(a+1),style:s,text:n[a]}).appendTo(e.$t))}},preloadLightImg:function(){var e=this,i=t("img",this.opts.lamp),n=i.data("imgholder");t("<img/>").load(function(){e.$lampimg=i,e.originsrc=i.attr("src"),e.lampsrc=n}).attr("src",n)},marquee:function(t){this.lampsrc&&this.$lampimg.length&&("on"==t?this.$lampimg.attr("src",this.lampsrc):"off"==t&&this.$lampimg.attr("src",this.originsrc))},drawbar:function(e){this.$handles.eq(0).animate({opacity:"hide"},300,function(){t(this).animate({opacity:"show"},300,function(){e&&e()})})},play:function(){this.opts.showLamp&&this.marquee("on"),this.showHandbar&&this.drawbar()},stop:function(){this.opts.showLamp&&this.marquee("off")},flip:function(e,i,n){var a=this,s=a.opts,e=e||a.balls,n=n||a.callback;return a.checkballs(e)!=a.size?alert(a.errors.invalidBallFormat):(a.$t.hasClass(".hasball")||a.$t.addClass("hasball"),e=a.balls,a.callback=n,void(i===!1||"undefined"===i?(a.stop(),t.each(a.slides,function(t,i){var n=Number(e[t]);i.stop().css("marginTop",-(10+n)*s.offset[1])}),a.doCallback(a.callback)):(a.play(),t.each(a.slides,function(i,n){var o=Number(e[i]),r=s.timeout+s.delay*i,c=(10*s.loop+o)*s.offset[1];n.stop().animate({marginTop:"+="+.6*s.offset[1]}).stop().animate({marginTop:-c},r,function(){t(this).css("marginTop",-(10+o)*s.offset[1]),i==a.size-1&&(a.stop(),a.doCallback(a.callback))})}))))},quickflip:function(e){var i=this,n=i.opts,a=a||i.balls,s=s||i.callback;return i.callback=null,i.checkballs(a)!=i.size?alert(i.errors.invalidBallFormat):void t.each(i.slides,function(t,o){var r=Number(a[t]);o.stop().css({marginTop:-(10+r)*n.offset[1]}).animate({marginTop:-(10+r+10)*n.offset[1]},1e3,function(){t==i.size-1&&(i.doCallback(s),e&&e())})})},doCallback:function(t){t&&"[object Function]"===Object.prototype.toString.call(t)&&t()},debug:function(){this.debugs&&window.console&&console.log&&console.log("[flipball] "+Array.prototype.join.call(arguments," "))}},t.fn.flipball=function(i){var n;return this.each(function(){n=t.data(this,"flipball"),n||(n=t.data(this,"flipball",new e(this,i)))}),n}}(jQuery),function(t){function e(e,i){this.opts=t.extend({max:99999,min:1,step:1,init:1,debugs:!0},i),this.slides=[],this.$t=t(e),this.beforeSetValue=function(t){return t},this.onSetValue=function(){},this.debugs=this.opts.debugs,this.init()}e.prototype={init:function(){var t=this;if(t.$ctrl=t.$t.find("[data-counter-action]"),t.$title=t.$t.find("[data-counter-title]"),t.$input=t.$t.find("input.J_counter"),!t.$input.length)return t.debug("No input element!");t.setMaxValue(t.opts.max),t.setMinValue(t.opts.min),t.checkCtrl(),t.bindEvent();var e=t.opts.init;e>t.opts.max?e=t.opts.max:e<t.opts.min&&(e=t.opts.min),t.setInitValue(e),t.setValue(e)},lowerCase:function(t){return(t||"").toLowerCase()},setTitle:function(t){this.$title.text(t)},addClass:function(t){this.$t.addClass(t)},setOnSetValue:function(t){var e=this;e.onSetValue=t},setBeforeSetValue:function(t){var e=this;e.beforeSetValue=t},setMinValue:function(t){this.minValue=t,this.checkCtrl()},getMinValue:function(){return this.minValue},setMaxValue:function(t){this.maxValue=t,this.checkCtrl()},getMaxValue:function(){return this.maxValue},setInitValue:function(t){this.initValue=t},getInitValue:function(){return this.initValue},setValue:function(t){var e=this,i=e.$input,t=e.checkCtrl(t);t=e.beforeSetValue(t),i.val(t),e.onSetValue(t)},getValue:function(){return this.$input.val()},setButtonStatus:function(t,e){var i=this.$ctrl.filter('[data-counter-action="'+t+'"]');"disabled"==e?i.addClass("disabled"):i.removeClass("disabled")},checkCtrl:function(t){var e=this;e.opts;return"undefined"==t&&(t=e.getInitValue()),t<=e.getMinValue()?(e.setButtonStatus("decrease","disabled"),t=e.getMinValue()):e.setButtonStatus("decrease"),t>=e.getMaxValue()?(e.setButtonStatus("increase","disabled"),t=e.getMaxValue()):e.setButtonStatus("increase"),t},reset:function(){var t=this;t.setValue(t.getInitValue()),t.$input.val(t.getInitValue()),t.checkCtrl()},bindEvent:function(){var e=this,i=e.opts;e.$ctrl.on("click",function(n){if(t(this).hasClass("disabled"))return!1;var a=parseInt(e.$input.val()),s=t(this).data("counter-action");"increase"==s?a+=i.step:"decrease"==s&&(a-=i.step),e.setValue(a)}),e.$input.on("change",function(){var t=parseInt(this.value);e.setValue(t)})},debug:function(){this.debugs&&window.console&&console.log&&console.log("[counter] "+Array.prototype.join.call(arguments," "))}},t.fn.counter=function(i){var n;return this.each(function(){n=t.data(this,"counter"),n||(n=t.data(this,"counter",new e(this,i)))}),n}}(jQuery),function(t){function e(e,i){this.opts=t.extend({attr:"tips-title",direction:"top",target:"body",event:"mouseover",offsetFix:10,zIndex:500,className:"",animationDelay:300,autoinitialize:!1,maxLetter:20,beforeSetText:function(t){return t},showCase:function(){return!0},debugs:!0},i),this.slides=[],this.$t=t(e),this.text="",this.debugs=this.opts.debugs,this.init()}e.prototype={init:function(){var e=this.opts;this.$tips=t('<div class="ui-tips ui-tips-'+e.direction+'"><span class="ui-tips-text"></span><i class="ui-tips-arrow"></i></div>'),e.className&&this.$tips.addClass(e.className),this.$tips.css({position:"absolute",zIndex:e.zIndex}).appendTo(e.target).animate({opacity:"hide"},0),this.beforeSetText=e.beforeSetText,this.timer=null,this.$text=this.$tips.find(".ui-tips-text"),this.fontSize=parseFloat(this.$text.css("fontSize")),this.setText(this.$t.data(e.attr)),this.bindEvent()},getHandler:function(){return this.$t},getDom:function(){return this.$tips},setText:function(t){t=this.beforeSetText(t),t||(t=""),this.text!=t&&(this.text=t,this.$text.html(t))},getText:function(){return this.text},setStyle:function(){var t=this,e=t.$t.offset(),i=t.opts.offsetFix,n=t.opts.maxLetter,a=0,s=0,o=t.getText().length>n?n*t.fontSize:"auto";switch(t.opts.direction){case"right":a=e.left+t.$t.outerWidth()+i,s=e.top+(t.$t.outerHeight()-t.$tips.outerHeight())/2;break;case"bottom":a=e.left+(t.$t.outerWidth()-t.$tips.outerWidth())/2,s=e.top+t.$t.outerHeight()+i;break;case"left":a=e.left-t.$tips.outerWidth()-i,s=e.top+(t.$t.outerHeight()-t.$tips.outerHeight())/2;break;case"top":default:a=e.left+(t.$t.outerWidth()-t.$tips.outerWidth())/2,s=e.top-t.$tips.outerHeight()-i}t.$tips.css({left:a,top:s,width:o})},show:function(){var e=this;return e.opts.autoinitialize&&e.setText(e.$t.data(e.opts.attr)),!!e.opts.showCase(e)&&(e.setStyle(),void(e.timer=setTimeout(function(){t(e.$tips).animate({opacity:"show"})},e.opts.animationDelay)))},hide:function(){var t=this;t.timer&&(clearTimeout(t.timer),t.timer=null),t.$tips.animate({opacity:"hide"})},bindEvent:function(){var t=this,e=t.opts.event;return"mouseover"===e?t.$t.on({mouseover:function(){t.show()},mouseout:function(){t.hide()}}):t.$t.toggle(function(){t.show()},function(){t.hide()}),!1},debug:function(){this.debugs&&window.console&&console.log&&console.log("[tips]",arguments)}},t.fn.tips=function(i){var n;return this.each(function(){n=t.data(this,"tips"),n||(n=t.data(this,"tips",new e(this,i)))}),n}}(jQuery),function(t){function e(e,i){this.opts=t.extend({balls:[2,4,5],animationDelay:300,animationTimes:5,debugs:!1},i),this.slides=[],this.$t=t(e),this.debugs=this.opts.debugs,this.init()}e.prototype={init:function(){this.$dices=this.$t.children(),this.posArr=[[33,92],[55,53],[84,86],[13,53]],this.setBallsNum(this.opts.balls),this.randomPosition(!0),this.singleDiceAnimate=null,this.groupDiceAnimate=null},setBallsNum:function(e){e=e||this.balls||this.opts.balls,this.$dices.each(function(i,n){var a=e[i];t(this).attr("class","dice-ball-"+a).text(a)}),this.balls=e},getCurrentBalls:function(){return this.balls},randomPosition:function(e){var n=this,a=n.posArr,s=[];if(!e){var o=n.randomBelle(3,a.length-1,0);for(i=0;i<o.length;i++){var r=a[o[i]];s.push([r[0],r[1]])}return s}n.$dices.each(function(e){var i=a[e];t(this).css({left:i[0],top:i[1]}),s.push([i[0],i[1]])})},doDice:function(t,e){var i=this;i.diceAnimation("start"),setTimeout(function(){i.diceAnimation("stop",t,e)},(i.opts.animationTimes+1)*i.opts.animationDelay)},singleAnimateProcess:function(){var e=this;e.singleDiceAnimate||(e.singleDiceAnimate=setInterval(function(){var i=e.getRandomBalls();e.$dices.each(function(e,n){var a=i[e];t(this).attr("class","dice-ball-"+a).text(a)})},100))},animateProcess:function(){var t,e,i,n,a=this,s=a.opts.animationDelay;a.groupDiceAnimate||(a.groupDiceAnimate=setInterval(function(){t=a.randomPosition(),a.singleAnimateProcess(),a.$dices.each(function(o){!function(o){e=a.$dices.eq(o),n=t[o],i=Number(n[0]-e.position().left),e.animate({top:n[1]-50,left:e.position().left+.8*i},.28*s,function(){e=a.$dices.eq(o),n=t[o],i=Number(n[0]-e.position().left),e.animate({top:n[1],left:e.position().left+i},.3*s)})}(o)})},s))},stopAllAnimate:function(){var t=this;clearInterval(t.singleDiceAnimate),clearInterval(t.groupDiceAnimate),t.singleDiceAnimate=null,t.groupDiceAnimate=null},diceAnimation:function(t,e,i){var n=this;"start"==t?n.animateProcess():"stop"==t&&(e&&"[object Array]"===Object.prototype.toString.call(e)&&e.length==n.$dices.length?(n.stopAllAnimate(),n.setBallsNum(e),i&&"[object Function]"===Object.prototype.toString.call(i)&&i()):alert("开奖号码错误"))},getRandomBalls:function(){var t=this;return t.randomBelle(t.$dices.length,6,1)},randomBelle:function(t,e,i){function n(t,e,i){for(;o.length<t;){var n=a(e,i);s(o,n)||o.push(n)}return o}function a(t,e){return Math.round(Math.random()*(t-e))+e}function s(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1}var o=new Array;return n(t,e,i)},debug:function(){this.debugs&&window.console&&console.log&&console.log("[diceAnimation]",arguments)}},t.fn.diceAnimation=function(i){var n;return this.each(function(){n=t.data(this,"diceAnimation"),n||(n=t.data(this,"diceAnimation",new e(this,i)))}),n}}(jQuery),function(t){function e(e,i){this.opts=t.extend({markup:"",callback:function(){},debugs:!1},i),this.slides=[],this.$t=t(e),this.markup='<li><div class="rec1"><span class="dice-number dice-number-<#=ball1#>"><#=ball1#></span><span class="dice-number dice-number-<#=ball2#>"><#=ball2#></span><span class="dice-number dice-number-<#=ball3#>"><#=ball3#></span></div><div class="rec2"><#=num#></div><div class="rec3"><#=size#></div><div class="rec4"><#=oddEven#></div><div class="rec5"><#=number#></div></li>',this.debugs=this.opts.debugs,this.init()}e.prototype={init:function(){var t=this.opts.markup;t&&this.setMarkup(t)},getDom:function(){return this.$t},setMarkup:function(t){this.markup=t},getMarkup:function(){return this.markup},getHTML:function(t){var e=this.getMarkup();for(p in t)t.hasOwnProperty(p)&&(reg=RegExp("<#="+p+"#>","g"),e=e.replace(reg,t[p]));return e},append:function(t){var e=this.getHTML(t);this.$t.append(e),this.afterInsert()},prepend:function(t){var e=this.getHTML(t);this.$t.prepend(e),this.afterInsert()},afterInsert:function(){var t=this.opts.callback;t&&"[object Function]"===Object.prototype.toString.call(t)&&t()},debug:function(){this.debugs&&window.console&&console.log&&console.log("[gameRecords]",arguments)}},t.fn.gameRecords=function(i){var n;return this.each(function(){n=t.data(this,"gameRecords"),n||(n=t.data(this,"gameRecords",new e(this,i)))}),n}}(jQuery),function(t){function e(e,i){this.opts=t.extend({showNum:5,ballurl:"javascript:void(0);",markup:'<li><div class="cell1" data-history-project="<#=projectId#>"><#=projectId#></div><div class="cell2"><#=number#></div><div class="cell3"><#=writeTime#></div><div class="cell4"><dfn>¥</dfn><#=totalprice#></div><div class="cell5" data-history-balls>-,-,-</div><div class="cell6" data-history-result>等待开奖</div><div class="cell7"><a href="<#=ballurl#>?orderId=<#=orderId#>" target="_blank">投注详情</a></div></li>',ballMarkup:'<span class="dice-number dice-number-<#=ball#>"><#=ball#></span>',debugs:!1},i),this.slides=[],this.$t=t(e),this.debugs=this.opts.debugs,this.init()}e.prototype={init:function(){this.opts},getLength:function(){return this.$items=this.$t.children(),this.$items.length},render:function(t){var e=this,i=e.opts,n=i.markup;t.ballurl=i.ballurl;for(p in t)t.hasOwnProperty(p)&&(n=e.template(n,p,"totalprice"==p||"winMoney"==p?e.currency(t[p]/1e4):t[p]));return n},template:function(t,e,i,n){return n=n||RegExp("<#="+e+"#>","g"),t.replace(n,i)},append:function(e){var i=this;i.$render=t(i.render(e)).prependTo(i.$t),i.getLength()>i.opts.showNum&&i.$items.filter(function(t){return t>=i.opts.showNum}).remove()},update:function(e){var i=this,n=e.winlists,a=e.balls||[],s="";a.length&&t.each(a,function(t,e){var n=i.opts.ballMarkup;s+=i.template(n,"ball",e)+"\n"}),t.each(n,function(e,n){var a=n.projectId,o=n.winMoney||0;i.$t.find('[data-history-project="'+a+'"]').each(function(){var e="未中奖";o>0&&(e='<span class="price"><dfn>¥</dfn>'+i.currency(o/1e4)+"</span>"),t(this).siblings("[data-history-result]").html(e),t(this).siblings("[data-history-balls]").html(s)})})},currency:function(t,e,i){if(e=e||2,i=i||3,isNaN(t)||t<=0)return"0.00";var n="\\d(?=(\\d{"+(i||3)+"})+"+(e>0?"\\.":"$")+")";return t.toFixed(Math.max(0,~~e)).replace(new RegExp(n,"g"),"$&,")},debug:function(){this.debugs&&window.console&&console.log&&console.log("[gameHistory] "+Array.prototype.join.call(arguments," "))}},t.fn.gameHistory=function(i){var n;return this.each(function(){n=t.data(this,"gameHistory"),n||(n=t.data(this,"gameHistory",new e(this,i)))}),n}}(jQuery),function(t){var t=t||{},e=$("body"),i=$("#recharge-url").val(),n=new dsgame.GameMessage,a=new GameConfig,s=t.dsgamediceConf||{},o=$("#J-lottery-records").gameRecords();s=$.extend({gameConfig:a,message:n},s);var r=e.dsgamedice(s),c=$("#J-lottery-info-number"),l=$(".lottery-countdown"),u=null,h=null,d=t.issueTimeout||1e4,p=!0,m=t.ballsNeedSorted,f=r.gameConfig.getCurrentGameNumber(),g=r.gameConfig.getLotteryBalls();if(h=setInterval(function(){r.getServerIssues()},d),"flipball"==t.diceAnimationType)var b=t.flipballConf||{},v=$("#flipball").flipball(b);else if("dice"==t.diceAnimationType)var C=$("#J-lottery-info-balls").diceAnimation();t.recordMarkup&&o.setMarkup(t.recordMarkup);var y=t.createRecordRowData||function(){return"没有生成数据的方法"},T=function(t,e,i){t=t.split(""),m&&t.sort(function(t,e){return parseInt(t)-parseInt(e)}),$("#show-balls-number").html(e),v?v.flip(t,!0,function(){x(t,e,i)}):C&&C.doDice(t,function(){x(t,e,i)})},w=function(t){t=t||r.gameConfig.getLotteryNumbers();var e="";$.each(t,function(t,i){0===t&&(M.issue=i.issue,M.wn_number=i.wn_number),balls=(i.wn_number+"").split(""),balls.length&&(e+=o.getHTML(y(balls,i.issue)))}),o.getDom().empty().html(e)},x=function(e,i,n){n||o.prepend(y(e,i)),t.afterShowNumber&&"function"==typeof t.afterShowNumber&&t.afterShowNumber()};r.ready(function(){var t=r.getChipsElements();t.draggable({revert:"invalid",delay:600,opacity:.5,helper:"clone",zIndex:100}).on("longclick",function(){var t=$(this);r.$chips.removeClass("dice-chip-draggable"),t.addClass("dice-chip-draggable"),t.trigger("chip.selected")}).on("click",function(){$(this).trigger("chip.selected")}).on("chip.selected",function(){var t=$(this);r.$chips.removeClass("dice-chip-selected"),t.addClass("dice-chip-selected"),r.setChipValue(t.data("value")),r.setSelectedChipElements(t)}).on("chip.bet",function(t,e){}).filter('[data-value="'+r.getChipValue()+'"]').trigger("chip.selected");var e=r.getChipsButtonElements(),n=r.getChipsCustomElements();e.addClass("active").on("click",function(){$(this).hasClass("active")?(n.animate({top:"+=20px",opacity:"hide"}),$(this).removeClass("active")):(n.animate({top:"-=20px",opacity:"show"}),$(this).addClass("active"))}).trigger("click"),$(document).on("click",function(t){var i=$(t.target);i.parents(".dice-chip-wrap").length&&!i.parents(".dice-chip-choose").length||e.hasClass("active")&&(n.animate({top:"+=20px",opacity:"hide"}),e.removeClass("active"))});var a=r.getChipsMirrorElements();a.on("click",function(){if($(this).hasClass("dice-chip-hide")){var t=r.getChipsMirror(),e=t.shift();e.addClass("dice-chip-hide"),t.push($(this).removeClass("dice-chip-hide")),r.setChipsMirror(t);var i=e.data("value"),n=$(this).data("value"),a=r.getChipsElements();a.filter('[data-value="'+i+'"]').addClass("dice-chip-hide"),a.filter('[data-value="'+n+'"]').removeClass("dice-chip-hide");var s=a.filter(".dice-chip-selected");if(s.hasClass("dice-chip-hide")){s.removeClass("dice-chip-selected");var o=a.filter(":not(.dice-chip-hide)").eq(0),c=o.data("value");o.addClass("dice-chip-selected"),r.setChipValue(c),r.setSelectedChipElements(o)}}return!1});var s=$(".dice-recycle");s.droppable({accept:".dice-chip, .dice-sheet",hoverClass:"dice-recycle-hover",tolerance:"pointer",drop:function(t,e){var i=$(e.draggable),n=r.getSheetData(i),a=$(this);return!i.parent().hasClass("dice-chip-choose")&&(i.removeClass("dice-sheet-draggable"),r.setSheetData(i,-n),void r.addActionLog({from:i,to:a,amount:n,type:"recycle"}))}});var o=r.getSheetsElements();o.droppable({accept:".dice-chip, .dice-sheet",hoverClass:"dice-sheet-hover",tolerance:"pointer",drop:function(t,e){var i=$(e.draggable),n=r.getSheetData(i),a=$(this),s="bet";if(r.chipIsOverLimit(a,n)){var o=$(e.helper).clone().css({position:"absolute",display:"block",zIndex:1,left:e.offset.left,top:e.offset.top}).appendTo("body");return o.find(".dice-sheet-bg").css({opacity:0}),o.animate(i.offset(),function(){o.remove()}),r.showActionTips(a,"该注单超过限额了"),!1}i.hasClass("dice-sheet")?(i.removeClass("dice-sheet-draggable"),r.setSheetData(i,-n),s="move"):s="bet",r.addActionLog({from:i,to:a,amount:n,type:s}),r.setSheetData(a,n)}}).draggable({revert:"invalid",delay:500,opacity:.5,helper:"clone"}).on("longclick",function(){return!!$(this).find(".dice-chip").length&&(o.removeClass("dice-sheet-draggable"),void $(this).addClass("dice-sheet-draggable"))}).on("click",function(){if(r.getAnimationStatus())return!1;var t=(r.getChipValue(),$(this));r.moveChip(t)}).tips({attr:"value",autoinitialize:!0,showCase:function(t){return"￥0"!=t.getText()},beforeSetText:function(t){return t||(t=0),t="￥"+t}}),r.getActionsElements().on("click",function(){if($(this).hasClass("disabled")||$(this).prop("disable")||r.getAnimationStatus())return!1;var t=$(this).data("action");t&&(actionString="action"+r.letterCapitalize(t),r[actionString]&&r[actionString]())});var c=r.getContinusCounter();c.setTitle("连  投"),c.addClass("continus-counter");var l=r.getMultipleCounter();l.setTitle("倍  投"),l.addClass("multiple-counter"),r.getBalanceRechargeElements().attr({href:i,target:"_blank"}),r.getTipsElements().tips({direction:"right"}),r.getOddsTipsElements().tips({direction:"bottom",maxLetter:15,beforeSetText:function(t){var e="<span>开奖赔率："+this.getHandler().text()+"</span>";return t=e+"<span>投注2元可中奖金："+t+"元</span>"}})}),r.getTargetElement().on("dsgame.dice.dynamicConfigChange",function(t,e){e.isstop?($(".lottery-status").find(".soldout").show(),$(".lottery-status").find(".lottery-countdown").hide()):($(".lottery-status").find(".soldout").hide(),$(".lottery-status").find(".lottery-countdown").show());var i=e.currentNumber;if(c.html(i),f&&f!=i){var n=r.message,a=5,s='<div class="tipdom-cont"><p>当前已进入第<span>'+i+'</span>期</p><p>请留意期号变化(<span id="J-gamenumber-change-s-num">5</span>)</p></div>';n.show({mask:!1,cancelIsShow:!1,title:"温馨提示",content:s,closeIsShow:!0,closeFun:function(){n.hide()}}),function(){return a--,a<0?void n.hide():($("#J-gamenumber-change-s-num").text(a),void setTimeout(arguments.callee,1e3))}()}f=i;var o=e.currentNumberTime-e.currentTime;u&&(clearTimeout(u),u=null),u=setInterval(function(){o--,o<=0&&r.getServerDynamicConfig(),o<=10?l.addClass("caution-countdown"):l.removeClass("caution-countdown");var t=Math.floor(o%3600/60),e=o%3600%60;t<10&&(t="0"+t),e<10&&(e="0"+e),t+="",e+="";var i=t.substring(0,1),n=t.substring(1,2),a=e.substring(0,1),s=e.substring(1,2);l.find('[data-time="m1"]').text(i).attr("class","time-"+i),l.find('[data-time="m2"]').text(n).attr("class","time-"+n),l.find('[data-time="s1"]').text(a).attr("class","time-"+a),l.find('[data-time="s2"]').text(s).attr("class","time-"+s)},1e3)}).trigger("dsgame.dice.dynamicConfigChange",r.gameConfig.getConfig());var M={issue:"",wn_number:""};r.getTargetElement().on("dsgame.dice.serverIssuesChange",function(t,e){var i=(e.issues,e.last_number);i.issue!=M.issue?i.wn_number&&(T(i.wn_number,i.issue),M.issue=i.issue,M.wn_number=i.wn_number):i.wn_number&&i.wn_number!=M.wn_number&&(T(i.wn_number,i.issue),M.issue=i.issue,M.wn_number=i.wn_number),!i.wn_number}),T(g,r.gameConfig.getLastGameNumber(),p),w(),r.getTargetElement().on("dsgame.dice.logout",function(t,e){var i=r.message;i.hide(),i.show({mask:!0,confirmIsShow:!0,confirmText:"立即登录",confirmFun:function(){window.location.reload()},content:'<div class="pop-waring"><i class="ico-waring"></i><h4 class="pop-text">登录超时，请重新登录平台！</h4></div>'})}),$(".scroll-pane").jScrollPane({autoReinitialise:!0,showArrows:!0,arrowScrollOnHover:!0,autoReinitialiseDelay:5e3});var S=$(".game-history-wrap").slideUp(0);$(".dice-bar").on("click",".history-toggle",function(){return $(this).toggleClass("history-toggle-active"),S.slideToggle(),!1}),S.on("click",".history-close",function(){return $(".history-toggle").trigger("click"),!1}),r.getTargetElement().on("dsgame.dice.beforeSend",function(t,e){var i=e.win.dom.find(".pop-control"),n=i.find("a.confirm");i.find("a.cancel");n.addClass("btn-disabled"),n.text("提交中..."),e.win.hideCancelButton()}).on("dsgame.dice.afterSubmit",function(t,e){var i=e.win.dom.find(".pop-control"),n=i.find("a.confirm");i.find("a.cancel");n.removeClass("btn-disabled"),n.text("确 认"),document.getElementById("record-iframe").contentWindow.location.reload(),$("[data-refresh-balance]").eq(0).trigger("click")}),function(){function t(){var t=$(window).height(),l=$(window).width();l%2&&e.width(l-1),t<u+n?(s.height(n),o.css({position:"relative",bottom:"auto",left:0}),r.css({position:"relative",bottom:"auto",left:0})):t>u+n&&(i||(o.css({position:"fixed",bottom:c,left:0}),r.css({position:"fixed",bottom:0,left:0})),t>u+a?s.height(a):s.height(t-u))}var i=dsgame.util.isIE6,n=700,a=1098,s=$(".dice-wrap"),o=$(".dice-ctrl"),r=$("#footer"),c=r.outerHeight()||0,l=s.offset().top,u=o.outerHeight()+c+l,h=null;$(window).on("resize",function(){h&&clearTimeout(h),h=setTimeout(function(){t()},100)}).trigger("resize"),$(function(){setTimeout(function(){$("html,body").animate({scrollTop:l},400)},1e3)})}()}(window.gameSelfConfig);