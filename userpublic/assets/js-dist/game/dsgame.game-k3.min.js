/*‮*/!function(e,t,n,a){var r,i={name:"k3",jsNamespace:""},o=e.Games,s={init:function(){var e=this;e.eventProxy()},getGameConfig:function(){return o.K3.Config}},u=e.Class(s,n);u.defConfig=i,u.getInstance=function(e){return r||(r=new u(e))},e.Games[t]=u}(dsgame,"K3",dsgame.Game),function(e,t,n,a){var r,i=gameConfigData,o={},s={},u={};!function(){var e,t,n,a=i.wayGroups;$.each(a,function(){e=this,e.fullname_en=[e.name_en],e.fullname_cn=[e.name_cn],s[""+e.id]=e,e.children&&$.each(e.children,function(){t=this,t.fullname_en=e.fullname_en.concat(t.name_en),t.fullname_cn=e.fullname_cn.concat(t.name_cn),s[""+t.id]=t,t.children&&$.each(t.children,function(){n=this,n.fullname_en=t.fullname_en.concat(n.name_en),n.fullname_cn=t.fullname_cn.concat(n.name_cn),u[""+n.id]=n})})})}();var l={init:function(){},getGameId:function(){return i.gameId},getGameNameEn:function(){return i.gameNameEn},getGameNameCn:function(){return i.gameNameCn},getTraceMaxTimes:function(){return Number(i.traceMaxTimes)},getCurrentLastTime:function(){return i.currentNumberTime},getCurrentTime:function(){return i.currentTime},getCurrentGameNumber:function(){return i.currentNumber},getLastGameNumber:function(){var e=i.issueHistory.last_number.issue,t=i.issueHistory.issues[0].issue;return t>e&&(e=t),e},getLotteryBalls:function(){var e=i.issueHistory.last_number.wn_number,t=i.issueHistory.last_number.issue,n=i.issueHistory.issues[0].issue;return n>t&&(e=i.issueHistory.issues[0].wn_number),e||""},getLotteryNumbers:function(){return i.issueHistory.issues||[]},getFormatLotteryNumbers:function(e,t){var n=this,a={};return t=t||n.getLotteryNumbers(),e=e||"hour",$.each(t,function(t,r){var i=n.getKeyByDateStr(""+r.offical_time,e);i&&(a[i]||(a[i]=[]),a[i].push(r))}),a},getKeyByDateStr:function(e,t){e=e||"0",t=t||"hour";var n=new Date;if(n.setTime(1e3*parseInt(e)),"[object Date]"===Object.prototype.toString.call(n)){if(isNaN(n.getTime()))return"";var a=n.getMonth()+1,r=n.getDate(),i=n.getHours(),o=n.getMinutes();return a<10&&(a="0"+a),r<10&&(r="0"+r),i<10&&(i="0"+i),o<10&&(o="0"+o),"month"==t?a+"月":"day"==t?a+"月"+r+"日":"minute"==t?i+":"+o:i+":00"}return""},getGameNumbers:function(){return i.gameNumbers},getLimitByMethodId:function(e,t){var t=t||1,n=Number(this.getPrizeById(e).max_multiple);return n/t},getSubmitUrl:function(){return i.submitUrl},getUpdateUrl:function(){return i.loaddataUrl},getUploadPath:function(){return i.uploadPath},getJsPath:function(){return i.jsPath},getDefaultMethodId:function(){return i.defaultMethodId},getUserName:function(){return i.username},getMethods:function(){return i.wayGroups},getMethodById:function(e){return u[""+e]},getPrizeById:function(e){return i.prizeSettings[""+e]},getMethodNodeById:function(e){return s[""+e]},getMethodNameById:function(e){var t=this.getMethodById(e);return t?t.name_en:""},getMethodCnNameById:function(e){var t=this.getMethodById(e);return t?t.name_cn:""},getMethodFullNameById:function(e){var t=this.getMethodById(e);return t?t.fullname_en:""},getMethodCnFullNameById:function(e){var t=this.getMethodById(e);return t?t.fullname_cn:""},getOnePriceById:function(e){return Number(this.getMethodById(e).price)},getToken:function(){return i._token},updateConfig:function(e){$.extend(!0,i,e)},getOptionalPrizes:function(){return i.optionalPrizes},setOptionalPrizes:function(){return $("#J-bonus-select-value").val()},getDefaultCoefficient:function(){return i.defaultCoefficient?"1":i.defaultCoefficient},getDefaultMultiple:function(){return i.defaultMultiple?i.defaultMultiple:"1"},getLoadIssueUrl:function(){return i.loadIssueUrl},getMaxPrizeGroup:function(){return i.maxPrizeGroup}},c=e.Class(l,n);c.defConfig=o,c.getInstance=function(e){return r||(r=new c(e))},e.Games.K3[t]=c}(dsgame,"Config",dsgame.Event),function(e,t,n,a){var r,i={},o=e.Games,s={init:function(e){var t=this;o.setCurrentGameMessage(t)}},u=e.Class(s,n);u.defConfig=i,u.getInstance=function(e){return r||(r=new u(e))},e.Games.K3[t]=u}(dsgame,"Message",dsgame.GameMessage),function(e,t,n,a){var r={name:"wuxing.zhixuan.danshi",editorobj:".content-text-balls",uploadButton:"#file",exampleText:"12345 33456 87898 <br />12345 33456 87898 <br />12345 33456 87898 ",tips:"五星直选单式玩法提示",exampleTip:"这是单式弹出层提示",checkFont:/[\u4E00-\u9FA5]|[\/\n]|[\/W]/g,filtration:/[\s]|[,]|[;]|[<br>]|[，]|[；]/i,checkNum:/^[0-9]*$/,normalTips:'<p style="color:#999;font-size:12px;line-height:170%;">'+["说明：","1、每一注号码之间的间隔符支持 回车  空格[ ]    逗号[,]   分号[;]","2、文件格式必须是.txt格式,大小不超过200KB","3、文件较大时会导致上传时间较长，请耐心等待！","4、将文件拖入文本框即可快速实现文件上传功能","5、导入文本内容后将覆盖文本框中现有的内容。"].join("<br>")+"</p>"},i="K3",o=e.Games,s=e.Games[i],u={init:function(e){var t=this;t.ieRange="",t.vData=[],t.aData=[],t.tData=[],t.errorData=[],t.sameData=[],t.firstfocus=!0,t.ranNumTag=!1,t.isFirstAdd=!0,o.getCurrentGameOrder().addEvent("beforeAdd",function(e,n){t.tData;n.type==t.defConfig.name&&(t.isFirstAdd?t.ranNumTag||(n.lotterys=[],t.isFirstAdd=null,t.updateData(),o.getCurrentGameOrder().add(o.getCurrentGameStatistics().getResultData())):(""==t.errorData.join("")&&""==t.sameData.join("")||t.ballsErrorTip(),t.isFirstAdd=!0))})},initFrame:function(){var t=this;t.win=t.container.find(t.defConfig.editorobj)[0].contentWindow,t.doc=t.win.document,t._bulidEditDom();var n=e.Tip.getInstance();t.container.find(".balls-example-danshi-tip").click(function(e){e.preventDefault();var a=$(this);n.setText(t.getExampleText()),n.show(a.outerWidth()+10,0,this)}).mouseout(function(){n.hide()})},getExampleText:function(){return this.defConfig.exampleText},rebuildData:function(){var e=this;e.balls=[[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]]},buildUI:function(){var e=this;e.container.html(e.getHTML())},reSelect:function(){},batchSetBallDom:function(){},getNormalTips:function(){return this.defConfig.normalTips},showNormalTips:function(){var e=this;e.replaceText(e.getNormalTips.call(e)),e.firstfocus=!0},_bulidEditDom:function(){var e=this,t="";e.doc.designMode="On",e.doc.contentEditable=!0,e.doc.open(),t='<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',t+="<style>*{margin:0;padding:0;font-size:14px;}</style>",t+="</head>",e.doc.writeln("<html>"+t+'<body style="word-break: break-all">'+e.getNormalTips()+"</body></html>"),e.doc.close(),e.bindPress(),document.all&&(e.doc.onkeypress=function(){return e._ieEnter()}),e.dragUpload()},dragUpload:function(){var e=this,t=$(e.doc.body);window.FileReader&&(t.bind("dragover",function(e){e.preventDefault(),e.stopPropagation()}),t.get(0).addEventListener("drop",function(t){t.preventDefault(),t.stopPropagation();var n=t.dataTransfer.files,a=n[0],r=new FileReader,i=a.type?a.type:"n/a";"text/plain"==i&&(r.onload=function(t){var n=t.target.result;""!=$.trim(n)&&(e.replaceText(n),e.firstfocus=!1,e.updateData())},r.readAsText(a))},!1))},_ieEnter:function(){var e=this,t=e.win.event;if(13==t.keyCode)return this._saveRange(),this._insert("<br/>"),!1},_insert:function(e){var t=this;if(t.ieRange)t.ieRange.pasteHTML(e),t.ieRange.select(),t.ieRange=!1;else if(t.win.focus(),document.all)t.doc.body.innerHTML+=e;else{var n=win.getSelection(),a=n.getRangeAt(0),r=a.createContextualFragment(e);a.insertNode(r)}},_saveRange:function(){if(document.all&&!me.ieRange){var e=me.doc.selection;if(me.ieRange=e.createRange(),"Control"!=e.type){var t=me.ieRange.parentElement();"INPUT"!=t.tagName&&t!=document.body||(me.ieRange=!1)}}},getHtml:function(){var e=this;return e.doc?$(e.doc.body).html():""},getText:function(){var e=this;return e.doc?$(e.doc.body).text():""},replaceText:function(e){var t=this;t.doc&&e&&$(t.doc.body).html(e)},bindPress:function(){var e=this,t=e.container.find(e.defConfig.uploadButton),n=window.navigator.userAgent.toLowerCase();$(e.doc).bind("input",function(){e.updateData()}),n.indexOf("msie")>0&&($(e.doc.body).bind("keyup",function(){e.updateData()}),$(e.doc.body).bind("blur",function(){e.updateData()})),$(e.doc).bind("focus",function(){e.firstfocus&&(e.replaceText(" "),e.firstfocus=!1)}),$(e.doc).bind("blur",function(){var t=e.getText();""==$.trim(t)&&e.showNormalTips()}),$(e.doc.body).bind("focus",function(){e.firstfocus&&(e.replaceText(" "),e.firstfocus=!1)}),$(e.doc.body).bind("blur",function(){var t=e.getText();""==$.trim(t)&&e.showNormalTips()}),t.bind("change",function(){var t=$(this).parent();e.checkFile(this,t)})},iterator:function(e){for(var t=this,n=t.defConfig,a=[],r=0,i=0;i<e.length;i++)n.filtration.test(e.charAt(i))&&(a.push(e.substr(r,i-r)),r=i+1);return a},checkResult:function(e,t){for(var n=t.length-1;n>=0;n--)if(t[n].join("")==e)return!1;return!0},filterLotters:function(e){var t=this,n="";return n=e.replace(/<br>+|&nbsp;+/gi," "),n=n.replace(/[\s]|[,]+|[;]+|[，]+|[；]+/gi," "),n=n.replace(/<(?:"[^"]*"|'[^']*'|[^>'"]*)+>/g," "),n=n.replace(t.defConfig.checkFont,"")+" "},checkSingleNum:function(e){var t=this;return t.defConfig.checkNum.test(e)&&e.length==t.balls.length},checkBallIsComplete:function(e){var t=this,n=0,a=[];for(t.aData=[],t.vData=[],t.sameData=[],t.errorData=[],t.tData=[],a=t.iterator(t.filterLotters(e))||[];n<a.length;n++)t.checkSingleNum(a[n])?(t.checkResult(a[n],t.tData)?t.tData.push(a[n].split("")):t.checkResult(a[n],t.sameData)&&t.sameData.push(a[n].split("")),t.vData.push(a[n].split(""))):t.checkResult(a[n],t.errorData)&&t.errorData.push(a[n].split("")),t.checkResult(a[n],t.aData)&&t.aData.push(a[n].split(""));return t.tData.length>0?(t.isBallsComplete=!0,t.isFirstAdd?t.vData:t.tData):(t.isBallsComplete=!1,[])},countInstances:function(e,t){var n=[],a=0;do a=e.indexOf(t,a),a!=-1&&(n.push(a),a+=t.length);while(a!=-1);return n},removeOrderError:function(){var e=this,t=e.vData.length>0?"":" ";if(!e.firstfocus){for(var n=0;n<e.vData.length;n++)t+=e.vData[n].join("")+"&nbsp;";if(e.errorDataTips(),""==$.trim(t))return void e.showNormalTips();e.replaceText(t),e.checkBallIsComplete(t)}},removeOrderSame:function(){var e=this,t=e.aData.length>0?"":" ";if(!e.firstfocus){for(var n=0;n<e.aData.length;n++)t+=e.aData[n].join("")+"&nbsp;";e.sameDataTips(),e.replaceText(t),e.checkBallIsComplete(t)}},removeOrderAll:function(){var e=this;e.firstfocus||(e.replaceText(" "),e.sameData=[],e.aData=[],e.tData=[],e.vData=[],o.getCurrentGameStatistics().reSet(),e.showNormalTips())},checkFile:function(e,t){var n=e.value,a=n.substring(n.lastIndexOf("."),n.length),a=a.toLowerCase();return".txt"!=a?(alert("对不起，导入数据格式必须是.txt格式文件哦，请您调整格式后重新上传，谢谢 ！"),!1):void t[0].submit()},getFile:function(e){var t=this,n=t.container.find(":reset");e&&(t.replaceText(e),t.firstfocus=!1,t.updateData(),n.click())},errorTip:function(e,t){var n=this;alert(n.errorData.join())},sameDataTips:function(){var e=this,t=e.sameData,n="",a=o.getCurrentGameMessage(),r=[];if(""!=t.join("")){for(var i=0;i<t.length;i++)$.trim(t[i].join(""))&&r.push(t[i].join(""));n='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码重复，已进行自动过滤</h4><p class="pop-text" style="display:block">'+r.join(", ")+"</p>",a.show({mask:!0,content:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">'+n+"</div>","</div>","</div>"].join(""),closeIsShow:!0,closeFun:function(){this.hide()}})}},errorDataTips:function(){var e=this,t=e.errorData,n="",a=o.getCurrentGameMessage(),r=[];if(""!=t.join("")){for(var i=0;i<t.length;i++)$.trim(t[i].join(""))&&r.push(t[i].join(""));n='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码错误，已进行自动过滤</h4><p class="pop-text" style="display:block">'+r.join(", ")+"</p>",a.show({mask:!0,content:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">'+n+"</div>","</div>","</div>"].join(""),closeIsShow:!0,closeFun:function(){this.hide()}})}},ballsErrorTip:function(e,t){var n=this,a=n.errorData,r=n.sameData,i="",s="",u=o.getCurrentGameMessage(),l=[],c=[];if(""!=r.join("")){for(var d=0;d<r.length;d++)$.trim(r[d].join(""))&&c.push(r[d].join(""));s='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码重复，已进行自动过滤</h4><p class="pop-text" style="display:block">'+c.join(", ")+"</p>"}if(""!=a.join("")){for(var d=0;d<a.length;d++)$.trim(a[d].join(""))&&l.push(a[d].join(""));i='<h4 class="pop-text" style="display:block;font-weight:bold">以下号码错误，已进行自动过滤</h4><p class="pop-text" style="display:block">'+l.join(", ")+"</p>"}u.show({mask:!0,content:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">'+s+i+"</div>","</div>","</div>"].join(""),closeIsShow:!0,closeFun:function(){this.hide()}})},reSet:function(){var e=this;e.isBallsComplete=!1,e.rebuildData(),e.updateData(),e.ranNumTag||e.showNormalTips(),e.removeRanNumTag()},formatViewBalls:function(e){for(var t=[],n=e.length,a=0;a<n;a++)t=t.concat(e[a].join(""));return t.join("|")},makePostParameter:function(e,t){for(var n=[],e=t.lotterys,a=0;a<e.length;a++)n=n.concat(e[a].join(""));return n.join("|")},getLottery:function(){var e=this,t=e.getHtml();return""==t?[]:e.checkBallIsComplete(t)},removeSameNum:function(e){var t,n=0,a=this,r=this.getBallData()[0].length;for(len=e.length,t=Math.floor(Math.random()*r);n<e.length;n++)if(t==e[n])return arguments.callee.call(a,e);return t},emptySameData:function(){this.sameData=[]},emptyErrorData:function(){this.errorData=[]},addRanNumTag:function(){var e=this;e.ranNumTag=!0,e.emptySameData(),e.emptyErrorData()},getTdata:function(){return this.tData},getOriginal:function(){return this.getTdata()},removeRanNumTag:function(){this.ranNumTag=!1},checkRandomBets:function(e,t){var n=this,a="undefined"==typeof e,e=e||{},r=[],t=t||0,i=(n.getBallData().length,n.getBallData()[0].length,o.getCurrentGameOrder().getTotal().orders);if(r=n.createRandomNum(),Number(t)>Number(n.getRandomBetsNum()))return r;if(a)for(var s=0;s<i.length;s++)if(i[s].type==n.defConfig.name){var u=i[s].original.join("").replace(/,/g,"");e[u]=u}return e[r.join("")]?(t++,arguments.callee.call(n,e,t)):r},randomNum:function(){var e=this,t=[],n=null,a=(e.getBallData(),e.defConfig.name,o.getCurrentGame().getCurrentGameMethod().getGameMethodName()),r=[],i=[];return e.addRanNumTag(),t=e.checkRandomBets(),i=t,r=e.combination(i),n={type:a,original:i,lotterys:r,moneyUnit:o.getCurrentGameStatistics().getMoneyUnit(),multiple:o.getCurrentGameStatistics().getMultip(),onePrice:o.getCurrentGame().getGameConfig().getInstance().getOnePrice(a),num:r.length},n.amountText=o.getCurrentGameStatistics().formatMoney(n.num*n.moneyUnit*n.multiple*n.onePrice),n},getHTML:function(){var e=o.getCurrentGame().getGameConfig().getInstance().getUploadPath(),t=o.getCurrentGame().getGameConfig().getInstance().getToken(),n=[];return n.push('<div class="balls-import clearfix">'),n.push('<form id="form1" name="form1" class="balls-import-form" enctype="multipart/form-data" method="post" action="'+e+'" target="check_file_frame" style="position:relative;padding-bottom:10px;">'),n.push('<input name="betNumber" type="file" id="file" size="40" hidefocus="true" value="导入" style="outline:none;-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);filter:alpha(opacity=0);opacity: 0;position:absolute;top:0px; left:0px; width:115px; height:30px;z-index:1;background:#000;cursor: pointer;" />'),n.push('<input name="_token" type="hidden" value="'+t+'" />'),n.push('<input type="button" class="btn balls-import-input" style="cursor: pointer;" value="导入注单" onclick=document.getElementById("form1").file.click()>&nbsp;&nbsp;&nbsp;&nbsp;<a style="display:none;" class="balls-example-danshi-tip" href="#">查看标准格式样本</a>'),n.push('<input type="reset" style="outline:none;-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);filter:alpha(opacity=0);opacity: 0;width:0px; height:0px;z-index:1;background:#000" />'),n.push('<iframe src="'+e+'" name="check_file_frame" style="display:none;"></iframe>'),n.push("</form>"),n.push('<div class="panel-select" ><iframe style="width:100%;height:100%;border:0 none;background-color:#F9F9F9;" class="content-text-balls"></iframe></div>'),n.push('<div class="panel-btn">'),n.push('<a class="btn remove-error" href="javascript:void(0);">删除错误项</a>'),n.push('<a class="btn remove-same" href="javascript:void(0);">删除重复项</a>'),n.push('<a class="btn remove-all" href="javascript:void(0);">清空文本框</a>'),n.push("</div>"),n.push("</div>"),n.join("")}},l=e.Class(u,n);l.defConfig=r,s[t]=l}(dsgame,"Danshi",dsgame.GameMethod),$(function(){dsgame.Games.K3.getInstance({jsNameSpace:"dsgame.Games.K3."}),dsgame.GameTypes.getInstance(),dsgame.GameStatistics.getInstance(),dsgame.GameOrder.getInstance(),dsgame.GameTrace.getInstance(),dsgame.GameSubmit.getInstance(),dsgame.Games.K3.Message.getInstance();var e,t,n=dsgame.Games,a=n.getCurrentGame().getGameConfig().getInstance(),r=a,i=a.getCurrentGameNumber(),o=!0,s=new dsgame.Tip({cls:"j-ui-tip-alert j-ui-tip-b j-ui-tip-showrule",text:"使用厘模式进行投注，单注注单最小金额为0.02元"}),u=(new dsgame.MiniWindow({cls:"lottery-board-pop",effectShow:function(){var e=this;e.dom.css({display:"block",left:"50%",marginLeft:-e.dom.outerWidth()/2,top:2*-e.dom.outerHeight()}).animate({top:206})},effectHide:function(){var e=this;e.dom.animate({top:2*-e.dom.outerHeight()},function(){e.dom.hide()})}}),function(e){this.$dices=e||$(".dice"),this.rands=["a","b","c","d"],this.randLen=this.rands.length,this.timeout=150,this.animation=function(e,t){var n=this;n.$dices.each(function(a,r){var i=$(r),o=n.randomBelle(n.randLen,n.randLen-1,0);i.attr("class","dice").delay(n.timeout).animate({opacity:"show"},100,function(){i.addClass("dice_"+n.rands[o[0]])}).delay(n.timeout).animate({opacity:"show"},100,function(){i.removeClass("dice_"+n.rands[o[0]]).addClass("dice_"+n.rands[o[1]])}).delay(n.timeout).animate({opacity:"show"},600,function(){i.removeClass("dice_"+n.rands[o[1]]).addClass("dice_"+n.rands[o[2]])}).delay(n.timeout).animate({opacity:"show"},600,function(){i.removeClass("dice_"+n.rands[o[2]]).addClass("dice_"+n.rands[o[3]])}).delay(n.timeout).animate({opacity:"show"},100,function(){i.removeClass("dice_"+n.rands[o[3]]).addClass("dice_"+e[a]),t&&"function"==typeof t&&t()})})},this.randomBelle=function(e,t,n){function a(e,t,n){for(;o.length<e;){var a=r(t,n);i(o,a)||o.push(a)}return o}function r(e,t){return Math.round(Math.random()*(e-t))+t}function i(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}var o=new Array;return a(e,t,n)}}),l=function(e,n){var a=$("#lottery-numbers-board");if($("#J-ernie-issue").html(e),n&&n.length){t||(a.find("[data-lottery-ernie-numbers]").replaceWith(c(n.length)),t=new u(a.find(".dice"))),$("#J-lottery-ernie-numbers").show(),$(".J-loading-lottery").hide();var r=0,i="大",o="双";$.each(n,function(e,t){r+=parseInt(t)}),r<=10&&(i="小"),r%2&&(o="单"),t.animation(n,function(){$("#J-lottery-property-hz").html(r),$("#J-lottery-property-dx").html(i),$("#J-lottery-property-ds").html(o)})}else $("#J-lottery-ernie-numbers").hide(),$(".J-loading-lottery").show()},c=function(e){for(var t=['<div style="display:none;" id="J-lottery-ernie-numbers" class="lottery-ernie-numbers lottery-ernie-numbers-'+e+'">'],n=0;n<e;n++)t.push('<div class="dice"></div>');return t.push('<div class="lottery-property">和值：<b id="J-lottery-property-hz">?</b><br/>形态：<span id="J-lottery-property-dx">?</span><i id="J-lottery-property-ds">?</i></div>'),t.push("</div>"),t.join("")},d=function(){o&&(i=a.getLastGameNumber(),o=!1),$.ajax({url:a.getLoadIssueUrl(),dataType:"JSON",success:function(t){t.last_number.issue-i>0&&(i=t.last_number.issue),t.last_number.issue==i?(e.stop(),r=t,l(t.last_number.issue,(""+t.last_number.wn_number).split("")),r.issues[0].issue==r.last_number.issue&&""==r.issues[0].wn_number&&(r.issues[0].wn_number=r.last_number.wn_number),gameConfigData.issueHistory.issues=r.issues,n.getCurrentGame().getCurrentGameMethod().miniTrend_updateTrend()):l(i)}})},m=function(){var e,t,r=a.getCurrentLastTime(),i=a.getCurrentTime(),o=r-i,s=""+a.getCurrentGameNumber(),u=$(".J-lottery-countdown li em"),l=$("#J-trace-statistics-countdown"),c=n.getCurrentGameMessage();t=function(){if(o<0)return e.stop(),void n.getCurrentGame().getServerDynamicConfig(function(){var e,t=""+a.getCurrentGameNumber(),r=2;c.hide(),n.getCurrentGameTrace().autoDeleteTrace(),n.getCurrentGameTrace().hide(),s!=t&&(c.showTip('<div class="tipdom-cont">当前已进入第<div class="row" style="color:#F60;font-size:18px;">'+t+' 期</div><div class="row">请留意期号变化 (<span id="J-gamenumber-change-s-num">3</span>)</div></div>'),e=setInterval(function(){$("#J-gamenumber-change-s-num").text(r),r-=1,r<-1&&(clearInterval(e),c.hideTip())},1e3))});var t=[],r=Math.floor(o/3600),i=Math.floor(o%3600/60),d=o%3600%60;r=r<10?"0"+r:""+r,i=i<10?"0"+i:""+i,d=d<10?"0"+d:""+d,t.push(r),t.push(i),t.push(d),u.each(function(e,n){$(this).text(t[e])}),l.html(t.join(":")),o--},e=new dsgame.Timer({time:1e3,fn:t}),$("#J-header-currentNumber").html(s)},g=function(){$("div.game-record-section>ul>li").click(function(){var e=$(this);$("div.game-record-section>ul>li").removeClass("current"),e.addClass("current"),$("#record-iframe").attr("src",e.attr("srclink"))})},f=function(){var t=r.last_number?r.last_number.issue:r.getLastGameNumber(),n=r.last_number?(""+r.last_number.wn_number).split(""):(""+r.getLotteryBalls()).split("");return""==r.getLotteryBalls()?e=new dsgame.Timer({time:5e3,isNew:!0,fn:d}):l(t,n),!1};m(),g(),f(),n.getCurrentGame().addEvent("changeDynamicConfig",function(t,n){e=new dsgame.Timer({time:5e3,isNew:!0,fn:d}),m()}),n.getCurrentGameTypes().addEvent("beforeChange",function(e,t){var a,r=$("#J-panel-gameTypes li"),i=$("#J-gametyes-menu-panel"),o=i.find('[data-id="'+t+'"]'),s=(n.getCurrentGame().getGameConfig().getInstance().getMethodCnNameById(t),"current");o.size()>0&&(i.find("dd").removeClass(s).end(),o.addClass(s),a=o.parents("li").addClass("current").show(),r.removeClass("current").eq(a.index()).addClass("current"))});var h=new dsgame.Tip({cls:"j-ui-tip-b j-ui-tip-showrule"});$("#J-balls-main-panel").on("mouseover",".pick-rule, .win-info",function(){var e=$(this),t=n.getCurrentGame().getCurrentGameMethod().getId(),a=n.getCurrentGame().getGameConfig().getInstance().getMethodById(t),r=e.hasClass("pick-rule")?a.bet_note:a.bonus_note;h.setText(r),h.show(h.getDom().width()/2*-1+e.width()/2,h.getDom().height()*-1-20,e)}),$("#J-balls-main-panel").on("mouseleave",".pick-rule, .win-info",function(){h.hide()}),$("#J-balls-main-panel").on("click",".pick-rule, .win-info",function(){return!1});var p=0;n.getCurrentGame().addEvent("afterSwitchGameMethod",function(e,t){var t=n.getCurrentGame().getCurrentGameMethod().getId(),a=n.getCurrentGameStatistics().getMoneyUnit(),r=n.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(t,a),i=n.getCurrentGame().getGameConfig().getInstance().getPrizeById(t),o=n.getCurrentGame().getGameConfig().getInstance().getMaxPrizeGroup(),s=n.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes().length,u=n.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes()[s-1].prize_group,l=0,c=!1;p=Number(i.prize),c=i.display_prize,l=u>o?p*a*o/u:p*a,n.getCurrentGameStatistics().getMultipleDom().setMaxValue(r),c?($("#J-method-prize").show(),$("#J-method-prize").find("span").html(dsgame.util.formatMoney(l))):$("#J-method-prize").hide(),n.getCurrentGame().getCurrentGameMethod().miniTrend_updateTrend()}),n.getCurrentGameTypes().addEvent("endShow",function(){this.changeMode(n.getCurrentGame().getGameConfig().getInstance().getDefaultMethodId())}),$("#J-add-order").click(function(){var e=n.getCurrentGameStatistics().getResultData();!e.mid||e.amount<"0.02"||n.getCurrentGameOrder().add(e)}),n.getCurrentGameStatistics().addEvent("afterUpdate",function(e,t,a){var r=this,i=$("#J-add-order"),o=n.getCurrentGame().getGameConfig().getInstance().getMaxPrizeGroup(),u=n.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes().length,l=n.getCurrentGame().getGameConfig().getInstance().getOptionalPrizes()[u-1].prize_group;if(t>0)if(a>="0.02"){i.removeClass("btn-disable");var c=r.getPrizeGroupRate()||0;r.setRebate(a,c),s.hide()}else s.show(s.getDom().width()/2*-1+i.width()/2,s.getDom().height()*-1-20,i),i.addClass("btn-disable"),r.setRebate(0);else i.addClass("btn-disable"),r.setRebate(0),s.hide();var d=p*Number(r.getMoneyUnit());l>o&&(d=p*Number(r.getMoneyUnit())*o/l),$("#J-method-prize").find("span").html(dsgame.util.formatMoney(d))});var v,b=$("#J-panel-order-list-cont");b.jScrollPane(),v=b.data("jsp"),n.getCurrentGameOrder().addEvent("afterChangeLotterysNum",function(e,t){var n=$("#J-submit-order"),a=$("#J-trace-switch"),r=e.data.orderData,i=!1,o=$(".J-cart-empty");if(t>0){for(var s=0;s<r.length;s++).001==r[s].moneyUnit?i=!0:"";i?(n.removeClass("btn-bet-disable"),a.addClass("btn-bet-disable")):n.add(a).removeClass("btn-bet-disable"),o.hide(),v.reinitialise()}else n.add(a).addClass("btn-bet-disable"),o.show()}),$("body").on("click",".remove-error",function(){n.getCurrentGame().getCurrentGameMethod().removeOrderError()}).on("click",".remove-same",function(){n.getCurrentGame().getCurrentGameMethod().removeOrderSame()}).on("click",".remove-all",function(){n.getCurrentGame().getCurrentGameMethod().removeOrderAll()}),n.getCurrentGameStatistics().setMultiple(n.getCurrentGame().getGameConfig().getInstance().getDefaultMultiple()),n.getCurrentGameStatistics().setMoneyUnitDom(n.getCurrentGame().getGameConfig().getInstance().getDefaultCoefficient()),$("body").on("click","#J-submit-order",function(){n.getCurrentGameTrace().deleteTrace(),n.getCurrentGameSubmit().submitData()}),$("#J-trace-switch").click(function(){for(var e=n.getCurrentGameOrder().orderData,t=!1,a=0;a<e.length;a++)"0.001"==e[a].moneyUnit?t=!0:"";return!t&&($("#J-trace-statistics-balance").html($("[data-user-account-balance]").html()),n.getCurrentGameTrace().show(),!1)}),$("#J-trace-panel").on("click",".closeBtn",function(){n.getCurrentGameTrace().hide(),n.getCurrentGameTrace().deleteTrace()}),$("#J-button-trace-confirm").click(function(){n.getCurrentGameTrace().getIsTrace()&&(n.getCurrentGameTrace().hide(),n.getCurrentGameSubmit().submitData(),n.getCurrentGameTrace().deleteTrace())}),n.getCurrentGameSubmit().addEvent("beforeSend",function(e,t){var n=t.win.dom.find(".pop-control"),a=n.find("a.confirm");n.find("a.cancel");a.addClass("btn-disabled"),a.text("提交中..."),t.win.hideCancelButton()}),n.getCurrentGameSubmit().addEvent("afterSubmit",function(e,t){var n=t.win.dom.find(".pop-control"),a=n.find("a.confirm");n.find("a.cancel");a.removeClass("btn-disabled"),a.text("确 认"),$("#record-iframe").attr("src",$(".game-record-section >ul.tabs >li.current").attr("srclink")),$("[data-refresh-balance]:eq(0)").trigger("click")}),setTimeout(function(){$("html,body").animate({scrollTop:140},400)},1e3),$(".play-section").addClass("play-section-no-gametypes")});