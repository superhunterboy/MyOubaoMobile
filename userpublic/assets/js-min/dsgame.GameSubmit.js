!function(e,t,a){var n,r={},o=e.Games,c={init:function(){{var e=this;e.defConfig}e.postLock=null,o.setCurrentGameSubmit(e)},getSubmitData:function(){var e={},t=o.getCurrentGameOrder().orderData,a=0,n=t.length,r=o.getCurrentGameTrace().getResultData(),c=0,i=r.traceData.length;for(e.gameId=o.getCurrentGame().getGameConfig().getInstance().getGameId(),e.isTrace=o.getCurrentGameTrace().getIsTrace(),e.traceWinStop=o.getCurrentGameTrace().getIsWinStop(),e.traceStopValue=o.getCurrentGameTrace().getTraceWinStopValue(),e.balls=[];n>a;a++)e.balls.push({jsId:t[a].id,wayId:t[a].mid,ball:t[a].postParameter.split(",").join("|"),viewBalls:t[a].viewBalls,num:t[a].num,type:t[a].type,onePrice:t[a].onePrice,moneyunit:t[a].moneyUnit,multiple:t[a].multiple,prizeGroup:t[a].prizeGroup});if(e.orders={},e.isTrace<1)e.orders[o.getCurrentGame().getGameConfig().getInstance().getCurrentGameNumber()]=1,e.amount=o.getCurrentGameOrder().getTotal().amount;else{for(;i>c;c++)e.orders[r.traceData[c].traceNumber]=r.traceData[c].multiple;e.amount=r.amount}return e},doPostLock:function(){var e=this;e.postLock=!0},cancelPostLock:function(){var e=this;e.postLock=!1},clearData:function(){var e=o.getCurrentGameOrder();e.reSet(),e.cancelSelectOrder(),o.getCurrentGame().getCurrentGameMethod().reSet(),o.getCurrentGameTrace().emptyRowTable()},submitData:function(){var t=this,a=t.getSubmitData(),n=o.getCurrentGameMessage();if(!t.postLock)return a.balls.length<=0?(n.show({type:"mustChoose",msg:"请至少选择一注投注号码！",data:{tplData:{msg:"请至少选择一注投注号码！"}}}),void t.cancelPostLock()):void n.show({type:"checkLotters",msg:"请核对您的投注信息！",confirmIsShow:!0,confirmFun:function(){t.postLock||$.ajax({url:o.getCurrentGame().getGameConfig().getInstance().getSubmitUrl(),data:o.getCurrentGame().editSubmitData(a),dataType:"json",method:"POST",beforeSend:function(){t.doPostLock(),t.fireEvent("beforeSend",n)},success:function(e){1==Number(e.isSuccess)?(n.show(e),t.clearData(),t.fireEvent("afterSubmitSuccess")):n.show(e),t.cancelPostLock()},complete:function(){t.fireEvent("afterSubmit",n)},error:function(){t.cancelPostLock()}})},cancelIsShow:!0,cancelFun:function(){t.cancelPostLock(),this.hide()},normalCloseFun:function(){t.cancelPostLock()},callback:function(){},data:{tplData:{lotteryDate:"--",lotteryName:o.getCurrentGame().getGameConfig().getInstance().getGameNameCn(),lotteryInfo:function(){for(var e="",t=o.getCurrentGame().getGameConfig().getInstance(),n=a.balls,r=0;r<n.length;r++){var c=n[r],i=t.getMethodCnFullNameById(c.wayId);i=i[0]==i[1]&&i[1]==i[2]?t.getMethodCnFullNameById(c.wayId)[2]:i.join(","),e+='<div class="game-submit-confirm-list">'+i+" "+c.viewBalls+"</div>"}return e},lotteryamount:e.util.formatMoney(a.amount,3),lotteryAcc:o.getCurrentGame().getGameConfig().getInstance().getUserName(),lotterOptionalPrizes:o.getCurrentGame().getGameConfig().getInstance().setOptionalPrizes()}}})}},i=e.Class(c,a);i.defConfig=r,i.getInstance=function(e){return n||(n=new i(e))},e[t]=i}(dsgame,"GameSubmit",dsgame.Event);