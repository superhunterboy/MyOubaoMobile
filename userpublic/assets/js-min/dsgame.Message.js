!function(t,e,n,o){var i,s=t.util,a={confirmButtonText:"confirm",cancelButtonText:"cancel",closeButtonText:"closeTip",cls:"",contentHtml:"",afterSetContentDelay:0,effectShow:function(){var t,e=this;s.toViewCenter(e.dom),t=parseInt(e.dom.css("top")),e.dom.css({top:t+100,opacity:1}),e.dom.show(),e.dom.animate({top:t-100,opacity:1},300)},effectHide:function(){this.dom.hide()},zIndex:700,isFixed:!0},c=(o(document),{init:function(t){var e=this,n=t.isFixed?"fixed":"absolute";n=s.isIE6?"absolute":n,e.dom=o('<div class="pop '+t.cls+'" style="z-index:'+t.zIndex+";position:"+n+';display:none;"><div class="pop-hd"><a href="#" class="pop-close"></a><h3 class="pop-title"><span class="title">提示</span></h3></div><div class="pop-bd"></div><div class="pop-btn"><a style="display:none" href="javascript:void(0);" class="btn confirm"><span>确 认</span><b class="btn-inner"></b></a><a style="display:none" href="javascript:void(0);" class="btn cancel"><span>取 消</span><b class="btn-inner"></b></a><a href="javascript:void(0);" style="display:none" class="btn closeTip"><span>关 闭</span><b class="btn-inner"></b></a></div></div>').appendTo("body"),e.effectShow=t.effectShow,e.effectHide=t.effectHide,e.dom.on("click",".pop-close",function(t){t.preventDefault(),e.doNormalClose(),e.hide()}),e.dom.find("."+e.defConfig.confirmButtonText).bind("click",function(){e.doConfirm()}),e.dom.find("."+e.defConfig.cancelButtonText).bind("click",function(){e.doCancel()}),e.dom.find("."+e.defConfig.closeButtonText).bind("click",function(){e.doClose()})},doNormalClose:function(){},doConfirm:function(){},doCancel:function(){},doClose:function(){},getConfirmButtonDom:function(){var t=this;return t.getContainerDom().find("."+t.defConfig.confirmButtonText)},getCancelButtonDom:function(){var t=this;return t.getContainerDom().find("."+t.defConfig.cancelButtonText)},getCloseButtonDom:function(){var t=this;return t.getContainerDom().find("."+t.defConfig.closeButtonText)},setConfirmName:function(t){var e=this;e.getConfirmButtonDom().find("span").text(t)},setCancelName:function(t){var e=this;e.getCancelButtonDom().find("span").text(t)},setCloseName:function(t){var e=this;e.getCloseButtonDom().find("span").text(t)},showConfirmButton:function(){var t=this;t.getConfirmButtonDom().show()},showCancelButton:function(){var t=this;t.getCancelButtonDom().show()},showCloseButton:function(){var t=this;t.getCloseButtonDom().show()},hideConfirmButton:function(){var t=this;t.getConfirmButtonDom().hide()},hideCancelButton:function(){var t=this;t.getCancelButtonDom().hide()},hideCloseButton:function(){var t=this;t.getCloseButtonDom().hide()},setTitle:function(t){this.getTitleDom().html(t)},setContent:function(t,e){var n=this,o=n.defConfig,i=0;n.getContentDom().html(t),i=o.afterSetContentDelay?o.afterSetContentDelay:i,i=e?e:i,i>0?setTimeout(function(){n.fireEvent("afterSetContent")},i):n.fireEvent("afterSetContent")},show:function(){var e=this;e.fireEvent("beforeShow"),this.effectShow(),e.fireEvent("afterShow"),t.util.isIE6&&e.defConfig.isFixed&&(e._IE6Fixed=t.util.startFixed(e.dom))},hide:function(){var e=this;e.effectHide(),e.fireEvent("afterHide"),t.util.isIE6&&e.defConfig.isFixed&&e._IE6Fixed.stop()},getContainerDom:function(){var t=this;return t._containerDom||(t._containerDom=t.dom)},getCloseDom:function(){var t=this;return t._closeDom||(t._closeDom=t.dom.find(".close"))},getTitleDom:function(){var t=this;return t._titleDom||(t._titleDom=t.dom.find(".pop-title"))},getContentDom:function(){var t=this;return t._ContentDom||(t._ContentDom=t.dom.find(".pop-bd"))}}),l=t.Class(c,n);l.defConfig=a,t[e]=l,t[e].getInstance=function(){return i||(i=new l(a))}}(dsgame,"MiniWindow",dsgame.Event,jQuery),function(t,e,n){var o,i={cls:""},s={init:function(e){var n=this;n.win=new t.MiniWindow(e),n.mask=t.Mask.getInstance(),n.reSet(),n.win.addEvent("afterHide",function(){n.reSet()}),n.closeTime=0},doAction:function(t){var e=this,n="rebulid"+t.type,o="getHtml"+t.type,i=function(){};e[n]&&$.isFunction(e[n])&&(i=e[n]),t.tpl="undefined"==typeof t.tpl?e[o]():""+t.tpl,delete t.type,i.call(e,t)},formatHtml:function(t,e){var n,o,i=e;for(n in i)i.hasOwnProperty(n)&&(o=RegExp("<#="+n+"#>","g"),t=t.replace(o,i[n]));return t},setTitle:function(t){var e=this,n=e.win;n.setTitle(t)},setContent:function(t,e){var n=this,o=n.win;o.setContent(t,e)},hideClose:function(){var t=this,e=t.win;e.getCloseDom().hide()},hideTitle:function(){var t=this,e=t.win;e.getTitleDom().hide()},addCssName:function(t){var e=this,n=e.win;n.getContainerDom().addClass(t)},restCssName:function(){var t=this,e=t.win,n=t.defConfig.cls;t.removeCssName(),e.getContainerDom().addClass(n)},removeCssName:function(t){var e=this,n=e.win;t?n.getContainerDom().removeClass(t):n.getContainerDom().removeClass()},show:function(t){var e=this,n=e.win;if("undefined"==typeof t)return void n.show();if(e.reSet(),"undefined"==typeof t.data&&(t.data={}),t.data.tplData="undefined"==typeof t.data.tplData?{}:t.data.tplData,t){if(t.type)return void e.doAction(t);"undefined"!=typeof t.tpl&&(t.content=e.formatHtml(t.tpl,t.data.tplData)),e.closeTime&&(clearTimeout(e.closeTime),e.closeTime=null),e.setTitle(t.title||"温馨提示"),e.setContent(t.content||""),t.cssName&&e.addCssName(t.cssName),t.confirmText&&n.setConfirmName(t.confirmText),t.cancelText&&n.setCancelName(t.cancelText),t.closeText&&n.setCloseName(t.closeText),t.normalCloseFun&&(n.doNormalClose=t.normalCloseFun),t.confirmFun&&(n.doConfirm=t.confirmFun),t.cancelFun&&(n.doCancel=t.cancelFun),t.closeFun&&(n.doClose=t.closeFun),t.confirmIsShow&&n.showConfirmButton(),t.cancelIsShow&&n.showCancelButton(),t.closeIsShow&&n.showCloseButton(),t.hideTitle&&e.hideTitle(),t.hideClose&&e.hideClose(),t.isShowMask&&e.mask.show(),n.show(),t.callback&&t.callback.call(e),t.time>0&&(e.closeTime=setTimeout(function(){e.hide(),clearTimeout(e.closeTime),e.closeTime=null},1e3*t.time))}},getContainerDom:function(){var t=this;return t.win.getContainerDom()},getContentDom:function(){var t=this;return t.win.getContentDom()},hide:function(){var t=this,e=t.win;e.hide(),t.reSet()},reSet:function(){var t=this,e=t.win;t.mask.hide(),t.setTitle("提示"),t.setContent(""),e.hideConfirmButton(),e.hideCancelButton(),e.hideCloseButton(),e.doConfirm=function(){},e.doCancel=function(){},e.doClose=function(){},e.doNormalClose=function(){},e.setConfirmName("确 认"),e.setCancelName("取 消"),e.setCloseName("关 闭")}},a=t.Class(s,n);a.defConfig=i,a.getInstance=function(t){return o||(o=new a(t))},t[e]=a}(dsgame,"Message",dsgame.Event);