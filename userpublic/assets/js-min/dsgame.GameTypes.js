!function(e,n,t){var a,i={panel:"#J-panel-gameTypes"},s=e.Games,o={init:function(e){var n=this;s.setCurrentGameTypes(n),n.container=$(e.panel),n.data=s.getCurrentGame().getGameConfig().getInstance().getMethods(),n.buildDom(),n.initEvent()},buildDom:function(){var e,n=this,t=[],a=[],i=[];$.each(n.data,function(){t=[],e=this,t.push('<li class="gametypes-menu-'+e.name_en+'">'),t.push('<div class="title">'),t.push(e.name_cn),i[0]=e.name_en,t.push("<span></span>"),t.push("</div>"),t.push("</li>"),a.push(t.join(""))}),n.getContainerDom().html(a.join("")),n.buildPanelMenu(),setTimeout(function(){n.fireEvent("endShow")},20)},buildPanelMenu:function(){var e,n,t,a=this,i=[],s=[],o=[],r=a.getPanelDom();$.each(a.data,function(){i=[],e=this,i.push('<li class="gametypes-sort gametypes-menu-'+e.name_en+'">'),i.push('<div class="content clearfix">'),$.each(e.children,function(){n=this,o[1]=n.name_en,i.push("<dl>"),i.push('<dt class="types-node types-node-'+n.name_en+'">'+n.name_cn+"</dt>"),$.each(n.children,function(){t=this,o[2]=t.name_en,i.push('<dd class="types-item" data-id="'+t.id+'">'+t.name_cn+"</dd>")}),i.push("</dl>")}),i.push("</div>"),i.push("</li>"),s.push(i.join(""))}),r.html(s.join(""))},initEvent:function(){var e=this;e.getPanelDom().on("click",".types-item",function(){var n=$(this),t=n.attr("data-id");t&&e.changeMode(t,n)}),e.container.on("click",".title",function(){var n=$(this).parent().index(),t=$(this).parents("ul").find("li"),a=e.getPanelDom().find(".gametypes-sort");t.removeClass("current").eq(n).addClass("current"),a.hide().removeClass("current").eq(n).addClass("current").show();var i=a.eq(n).find("dd.types-item:first").attr("data-id");e.changeMode(i)})},getContainerDom:function(){return this.container},getPanelDom:function(){return this.panelDom||(this.panelDom=$("#J-gametyes-menu-panel"))},changeMode:function(e){{var n=this;n.getContainerDom()}n.fireEvent("beforeChange",e);try{if(e==s.getCurrentGame().getCurrentGameMethod().getGameMethodName())return}catch(t){}s.getCurrentGame().switchGameMethod(e)}},r=e.Class(o,t);r.defConfig=i,r.getInstance=function(e){return a||(a=new r(e))},e[n]=r}(dsgame,"GameTypes",dsgame.Event);