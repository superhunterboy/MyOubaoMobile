!function(t,i,o,e){var s={},n=function(t){var i=this;i.init(t)};n.prototype={init:function(t){var i=this;i.defConfig=t,i.height=t.height,i.length=t.length,i.dom=e(t.dom),i.firstDom=i.dom.children().eq(0),i.top=parseInt(i.dom.css("marginTop")),i.firstDomIsRelative=!1,i.stopPos=0,i.defConfig.emptyTimes=t.emptyTimes||1,i.moveEmptyTimes=1e8,t.callback&&(i.callback=t.callback)},callback:function(){},start:function(){var t=this;t.isMoving=!1,t.moveEmpty()},setStopPos:function(t){this.stopPos=t},moveStop:function(t){var i=this;i.setStopPos(t*i.height*-1),i.moveEmptyTimes=i.defConfig.emptyTimes},reSet:function(){},moveEmpty:function(i){var o=this,e=o.height*o.length*-1+1,s=e+o.height,n=i||{duration:1e3,easing:"linear",step:function(){o.top=parseInt(o.dom.css("marginTop")),!o.firstDomIsRelative&&o.top<=s&&(o.firstDom.css("position","relative"),o.firstDomIsRelative=!0)},complete:function(){o.firstDom.css({position:"static"}),o.firstDomIsRelative=!1,o.dom.css("marginTop",0),o.top=0,o.moveEmptyTimes-=1,o.moveEmptyTimes>1?o.moveEmpty():(o.moveEmptyTimes=o.defConfig.emptyTimes,0==o.stopPos?(o.dom.css({marginTop:-1*o.height}),o.dom.animate({marginTop:o.height*o.length*-1+1},{duration:2500,easing:"easeOutQuart",step:function(){o.top=parseInt(o.dom.css("marginTop")),!o.firstDomIsRelative&&o.top<=s&&(o.firstDom.css("position","relative"),o.firstDom.css("top",o.height*o.length),o.firstDomIsRelative=!0)},complete:function(){o.isMoving=!0,o.callback()}})):o.dom.stop().animate({marginTop:o.stopPos},{duration:t.util.getRandom(1e3,2500),easing:"easeOutQuart",complete:function(){o.isMoving=!0,o.callback()}}))}};o.dom.stop().animate({marginTop:e},n)},constructor:n};var a={init:function(t){var i=this,t=e.extend({},t);i.doms=e(t.dom),i.items=[],t.callback&&(i.callback=t.callback),i.doms.each(function(o){i.items[o]=new n(e.extend({},t,{dom:this,callback:function(){var t=1;e.each(i.items,function(){this.isMoving||(t+=1)}),t==i.items.length&&i.callback()}}))})},callback:function(){},start:function(){var i=this;i.doms.each(function(o){setTimeout(function(){i.items[o].start()},100*t.util.getRandom(1,5))})},stop:function(t){var i=this;e.each(i.items,function(i){this.moveStop(t[i])})}},m=t.Class(a,o);m.defConfig=s,t[i]=m}(dsgame,"Ernie",dsgame.Event,jQuery);