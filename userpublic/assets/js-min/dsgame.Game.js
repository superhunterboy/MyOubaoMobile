!function(e,t,a){var n={id:-1,name:"",jsNameSpace:"dsgame.Games.SSC.",eventProxyPanel:"body"},r=e.Games,i=function(e){for(var t,a=$.trim(e).split("&"),n=0,r=a.length,i={};r>n;n++)t=a[n].split("="),t.length>0&&(i[t[0]]=2==t.length?t[1]:"");return i},s={init:function(e){var t=this;t.setName(e.name),r.setCurrentGame(t),t.setJsNameSpace(e.jsNameSpace),t.loadedHas={},t.currentGameMethod=null,t.addEvent("afterSwitchGameMethod",function(){r.getCurrentGame().getCurrentGameMethod().reSet();var e=r.getCurrentGame().getCurrentGameMethod().getId(),t=r.getCurrentGameStatistics().getMoneyUnit(),a=r.getCurrentGame().getGameConfig().getInstance().getLimitByMethodId(e,t),n=r.getCurrentGameStatistics().getMultip();n=n>a?a:n,r.getCurrentGameStatistics().setMultipleDom(n)})},getId:function(){return this.id},setId:function(e){this.id=e},getServerDynamicConfig:function(e){var t=this,a=r.getCurrentGame().getGameConfig().getInstance();$.ajax({url:a.getUpdateUrl(),dataType:"JSON",success:function(a){1==Number(a.isSuccess)&&(t.setDynamicConfig(a.data),$.isFunction(e)&&e.call(t,a.data))}})},setDynamicConfig:function(e){r.getCurrentGame().getGameConfig().getInstance().updateConfig(e),this.fireEvent("changeDynamicConfig",e)},eventProxy:function(){var e=this,t=e.defConfig,a=$(t.eventProxyPanel);a.click(function(t){var a,n,r=t.target.getAttribute("data-param");r&&""!=$.trim(r)&&(t.preventDefault(),a=i(r),n=e.getCurrentGameMethod(),n&&n.exeEvent(a,t.target))})},setLoadedHas:function(e,t){this.loadedHas[e]=t},getCacheMethod:function(e){var t=this,a=t.loadedHas,n=r.getCurrentGame().getGameConfig().getInstance().getMethodFullNameById(e).join(".");return a.hasOwnProperty(n)?a[n]:void 0},switchGameMethod:function(e){var t,a=this,e=Number(e),n=a.loadedHas,i=r.getCurrentGame().getGameConfig().getInstance().getMethodFullNameById(e).join(".");a.ccurrentGameMethod&&a.currentGameMethod.getId()==e||(n[i]?(t=n[i],a.fireEvent("beforeSwitchGameMethod"),a.currentGameMethod&&a.currentGameMethod.hide(),a.currentGameMethod=t,t.setId(e),t.show(),a.fireEvent("afterSwitchGameMethod")):a.setup(e,function(){a.fireEvent("beforeSwitchGameMethod"),a.currentGameMethod&&a.currentGameMethod.hide(),t=a.getCacheMethod(e),t.setId(e),t.show(),a.currentGameMethod=t,a.fireEvent("afterSetup"),a.fireEvent("afterSwitchGameMethod")}))},getCurrentGameMethod:function(){return this.currentGameMethod},setup:function(e){var t,a=this,n=a.buildPath(e),r=function(){};t=arguments.length>0?arguments[arguments.length-1]:r,$.isFunction(t)||(t=r),a.isSetuped(e)||$.ajax({url:n,cache:!1,dataType:"script",success:function(){a.loadedHas[n]=!0,t.call(a)},error:function(e,t){alert("资源加载失败\n"+n+"\n错误类型："+t)}})},buildPath:function(e){var t=this,a=r.getCurrentGame().getGameConfig().getInstance(),n=a.getJsPath(),i=a.getMethodFullNameById(e).join("."),s=t.getJsNamespace(),o=n+s+i+".js";return o},isSetuped:function(e){var t=this,a=t.loadedHas,n=t.buildPath(e);return a.hasOwnProperty(n)},setSetuped:function(){},setJsNameSpace:function(e){this.jsNameSpace=e},getJsNamespace:function(){return this.jsNameSpace},getGameConfig:function(){},getName:function(){return this.name},setName:function(e){this.name=e},editSubmitData:function(e){var t,a,n=this,r=e.balls;return $.each(r,function(){t=this,a=n.getCacheMethod(t.wayId),a?(a.editSubmitData(t),t.viewBalls=""):(alert("当前玩法文件未加载:"+t.type),e.balls=[])}),e.balls=r,e}},o=e.Class(s,a);o.defConfig=n,e[t]=o}(dsgame,"Game",dsgame.Event);